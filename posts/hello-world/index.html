<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>新的主题 | Tai's Blog</title><meta name=keywords content="hello world,1st post,新主题"><meta name=description content="这是基于 Hugo 系列主题第一篇文章，因为之前是在 Jekyll 上进行渲染，故而 Hello World也有更新 为啥变动 那么为啥从 Jekyll 变到 Hugo 呢？原因其实有几点： 之前用的主题看"><meta name=author content><link rel=canonical href=https://canonical.url/to/page><meta name=google-site-verification content="eAKh7zszsOtNde1wyq_sUo95ZPH4zTTJhR-_ol4VWDs"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://yunpengtai.top/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://yunpengtai.top/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://yunpengtai.top/favicon-32x32.png><link rel=apple-touch-icon href=https://yunpengtai.top/apple-touch-icon.png><link rel=mask-icon href=https://yunpengtai.top/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script>MathJax={loader:{load:["[tex]/boldsymbol"]},tex:{tags:"all",inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"]],processEscapes:!0,processEnvironments:!0,packages:{"[+]":["boldsymbol"]}}}</script><script src=https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-chtml-full.js integrity="sha256-kbAFUDxdHwlYv01zraGjvjNZayxKtdoiJ38bDTFJtaQ=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/pseudocode@2.4.1/build/pseudocode.min.css><script src=https://cdn.jsdelivr.net/npm/pseudocode@2.4.1/build/pseudocode.min.js></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y3CX2RWEDY"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-Y3CX2RWEDY",{anonymize_ip:!1})}</script><meta property="og:title" content="新的主题"><meta property="og:description" content="这是基于 Hugo 系列主题第一篇文章，因为之前是在 Jekyll 上进行渲染，故而 Hello World也有更新 为啥变动 那么为啥从 Jekyll 变到 Hugo 呢？原因其实有几点： 之前用的主题看"><meta property="og:type" content="article"><meta property="og:url" content="https://yunpengtai.top/posts/hello-world/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-06-19T11:23:00+08:00"><meta property="article:modified_time" content="2023-04-21T21:08:00+08:00"><meta property="og:site_name" content="ExampleSite"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://yunpengtai.top/posts/"},{"@type":"ListItem","position":3,"name":"新的主题","item":"https://yunpengtai.top/posts/hello-world/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"新的主题","name":"新的主题","description":"这是基于 Hugo 系列主题第一篇文章，因为之前是在 Jekyll 上进行渲染，故而 Hello World也有更新 为啥变动 那么为啥从 Jekyll 变到 Hugo 呢？原因其实有几点： 之前用的主题看","keywords":["hello world","1st post","新主题"],"articleBody":" 这是基于 Hugo 系列主题第一篇文章，因为之前是在 Jekyll 上进行渲染，故而 Hello World也有更新\n为啥变动 那么为啥从 Jekyll 变到 Hugo 呢？原因其实有几点：\n之前用的主题看着不好看，感觉很拥挤，之前想改没空，想要个简洁干净，专注于内容的主题 Jekyll 在服务器端的渲染速度实在是不快（本地却很快，不懂） Hugo 的设计更符合我的直觉，而且方便自定义好玩的功能，比如 shortcode 功能 主要是被另一位博主 Li’s Blog 用的主题吸引，就立马换成了新的主题 PaperMod，然而这个主题虽然简洁，但是少了一些我认为必须得有的功能，比如渲染公式，侧边目录等。于是任着喜欢「折腾」的性子，从零开始学 Hugo 的语法，然后四处借鉴学习，花了两天时间添加了一些功能，当然，这篇文章主要介绍相关的 feature，不会涉及到具体的实现\n没有一个主题能完全满足个人的需求，还是从底层原理出发，这样才能「自由自在」地进行更改\n支持features 基于的主题 PaperMod 的相关 features 便不在继续介绍，介绍一些我加入的特性\n公式渲染：这个主题一开始是没有公式渲染功能的，我通过引入 MathJax 来完成这一点，行内公式如：$a+b=c$，行间公式效果如下：\n$$ e^{\\pi i} + 1 = 0 $$\n然而，Hugo 是先将markdown渲染成HTML，接着才会轮到Mathjax进行渲染，这就导致很多公式就渲染不出，想了两种办法：- 将公式用div标签套起来，这样就不会被误判，然而这会增加平时写公式的负担，用shortcode来完成，还是有点臃肿 - 将公式用代码的样式包裹起来，再写一点js来保留原来公式的部分，比如公式（公式依旧带美元符号），这个更简便\n从平时的 markdown 公式书写转到带有代码样式包裹的公式可用下列代码：\ndef inline_replace(line): new_line = '' patterns = line.split('$') for (idx, l) in enumerate(patterns): tex = '`$' if idx % 2 == 0 else '$`' if idx == len(patterns)-1 and tex == '`$': tex = '' new_line += l + tex return new_line path = 'content/posts/Determinantal-Point-Process.md' lines = [line.rstrip() for line in open(path, encoding='utf-8')] count = 0 new_lines = [] for line in lines: if line == '': new_lines[-1] += '\\n' continue if line == '$$': if count % 2 == 0: new_lines.append('`$$') else: new_lines.append('$$`') count += 1 continue new_lines.append(inline_replace(line)) with open(path, 'w', encoding='utf-8') as w: for line in new_lines: w.write(line + '\\n') 伪代码的书写：引入伪代码图片实在是丑得难以接受，我通过引入额外的js来实现这一点，本身是以HTML形式书写的，为了减轻负担，立马改成了shortcode，示例如下： \\begin{algorithm} \\caption{Quicksort} \\begin{algorithmic} \\PROCEDURE{Quicksort}{$A, p, r$} \\IF{$p \u003c r$} \\STATE $q = $ \\CALL{Partition}{$A, p, r$} \\STATE \\CALL{Quicksort}{$A, p, q - 1$} \\STATE \\CALL{Quicksort}{$A, q + 1, r$} \\ENDIF \\ENDPROCEDURE \\PROCEDURE{Partition}{$A, p, r$} \\STATE $x = A[r]$ \\STATE $i = p - 1$ \\FOR{$j = p$ \\TO $r - 1$} \\IF{$A[j] \u003c x$} \\STATE $i = i + 1$ \\STATE exchange $A[i]$ with $A[j]$ \\ENDIF \\STATE exchange $A[i]$ with $A[r]$ \\ENDFOR \\ENDPROCEDURE \\end{algorithmic} \\end{algorithm} 评论功能：这个功能我在之前的主题也实现过，不同于各种基于 github 的评论系统，需要账号，waline 不需要账户，十分方便，而且可以加入很多有趣的表情，可以在页面最底部输入试试看\n侧边目录：原主题对目录的设置是将目录固定放在文章顶部，这样不利于对于长文整体的把握，故而将目录移动到了侧边，并且修改了一些 css 设置，自动高亮当前目录并且给它添加下划线，这样可以清楚地发现此时的章节\nMarginNote：以往 markdown 都是仅支持脚注，这样不利于文章的阅读，查看相关引用信息需要移至页面底部再返回，而 MarginNote 则给了作者更多自由的空间和方便读者阅读 The Elements of Typographic Style, 2004 而且移动至相关的标注会自动高亮对应的 MarginNote，更加方便读者阅读；同时过长会自动转行，方便进行较长的标注 Sidenotes give more life and variety to the page and are the easiest of all to find and read, If carefully designed, they need not enlarge either the page or the cost of printing it. 不过为了保持设计的简便性，没有对移动端优化（谁在手机端看文章的啊，雾）\n代码渲染：原先 PaperMod 对代码的渲染真是一言难尽，属实是丑到我了，于是乎，重新自定义了相关主题，主体是用了 a11y-light.min.css 在其之上又自定义了一些颜色： 示例代码 class Model(nn.Module): # Our model def __init__(self, input_size, output_size): super(Model, self).__init__() # for convenience self.fc = nn.Linear(input_size, output_size) def forward(self, input): output = self.fc(input) print(\"\\tIn Model: input size\", input.size(), \"output size\", output.size()) return output 更新时间：原先主题根本没有更新时间的设置，这样不利于读者查看文章最新的时间，文章的开头便有更新的时间，可以查看\n著作权声明：现在网上各种抄袭成风，需要对自己的文章进行声明，添加至文章末尾，例如本文用的是CC BY-NC-SA 4.0. Attribution-NonCommercial-ShareAlike 4.0 International 字体：原来的字体看着有点不舒服，这里将中文换成了霞鹜文楷，观感很不错，英文的话是在几个字体中选一个：-apple-system, BlinkMacSystemFont, segoe ui, Roboto, Oxygen, Ubuntu, Cantarell 这样看起来也很舒服，选取Lorem Ipsum 进行测试 Dummy text to test the appearance Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry’s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.\n中英文空白：汉学家称中文和英文之间的空白字元为「盘古之白」，大抵是因为劈开了全形字和半形字之间的混沌。在书写时适当地留白会提升观感，这个是通过盘古的js来实现的，手敲空格噼里啪啦的，倒不是很方便\nnotice：通过shortcode 添加了各种的提示框，看起来很不错，比如：\n一生疏狂尽余欢，半剖肝胆入剑寒。 剑至高危如蜀道，生逢穷途行路难。\n一生疏狂尽余欢，半剖肝胆入剑寒。 剑至高危如蜀道，生逢穷途行路难。\n一生疏狂尽余欢，半剖肝胆入剑寒。 剑至高危如蜀道，生逢穷途行路难。\n友链：添加了友链功能，这样方便添加别人的博客，加强朋友之间的联系，可查看主页的 Friends\n对于 markdown 引用的改进，原来的引用比较丑，下面是改进后的引用： Basically, I’m not interested in doing research and I never have been… I’m interested in understanding, which is quite a different thing. And often to understand something you have to work it out yourself because no one else has done it. — David Blackwell\n点击图片进行放大，对于图片大，缩放多的情况，点击放大是很有必要的，不妨试试看： 致谢 搭建自己的主题借鉴了很多别人的经验，这里列出进行致谢：\nPaperMod，这是一开始基于的主题，感谢作者的开源\n评论系统的支持，感谢 Waline，做的很干净\n关于对代码主题的更改，主要借鉴了 HightLight.js 官方的demo\n公式的渲染方面 MathJax 做的很nice\n伪代码的书写主要借鉴了Pseudocode.js的官方教程，必须加鸡腿\n侧边目录和一些 shortcode 的实现借鉴了 Sulv’s Blog以及 Guan Qirui\n字体还得感谢 霞骛文楷，比那些收费的丑字体好太多了\n盘古之白是通过pangu.js实现的，点赞\nMarginNote 的实现借鉴了 kennethfriedman和 scripter\n图片放大主要用了fancybox的功能，用起来也比较方便\n秉持着开源的精神，我的网站源码也抽离出来放在这里，欢迎使用或者PR\n","wordCount":"2361","inLanguage":"en","datePublished":"2022-06-19T11:23:00+08:00","dateModified":"2023-04-21T21:08:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://yunpengtai.top/posts/hello-world/"},"publisher":{"@type":"Organization","name":"Tai's Blog","logo":{"@type":"ImageObject","url":"https://yunpengtai.top/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://yunpengtai.top accesskey=h title="Home (Alt + H)">Home</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://yunpengtai.top/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://yunpengtai.top/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://yunpengtai.top/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://yunpengtai.top/friends/ title=Friends><span>Friends</span></a></li><li><a href=https://yunpengtai.top/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://yunpengtai.top>Home</a>&nbsp;»&nbsp;<a href=https://yunpengtai.top/posts/>Posts</a></div><h1 class=post-title>新的主题</h1><div class=post-meta><span title='2022-06-19 11:23:00 +0800 CST'>June 19, 2022</span>&nbsp;·&nbsp;Updated:&nbsp;April 21, 2023&nbsp;·&nbsp;2361 words</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e4%b8%ba%e5%95%a5%e5%8f%98%e5%8a%a8 aria-label=为啥变动>为啥变动</a></li><li><a href=#%e6%94%af%e6%8c%81features aria-label=支持features>支持features</a></li><li><a href=#%e8%87%b4%e8%b0%a2 aria-label=致谢>致谢</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><blockquote class=quote><p>这是基于 Hugo 系列主题第一篇文章，因为之前是在 Jekyll 上进行渲染，故而 Hello World也有更新</p></blockquote><h3 id=为啥变动>为啥变动<a hidden class=anchor aria-hidden=true href=#为啥变动>#</a></h3><p>那么为啥从 Jekyll 变到 Hugo 呢？原因其实有几点：</p><ol><li>之前用的主题看着不好看，感觉很拥挤，之前想改没空，想要个简洁干净，专注于内容的主题</li><li>Jekyll 在服务器端的渲染速度实在是不快（本地却很快，不懂）</li><li>Hugo 的设计更符合我的直觉，而且方便自定义好玩的功能，比如 shortcode 功能</li></ol><p>主要是被另一位博主 Li&rsquo;s Blog 用的主题吸引，就立马换成了新的主题 PaperMod，然而这个主题虽然简洁，但是少了一些我认为必须得有的功能，比如渲染公式，侧边目录等。于是任着喜欢「折腾」的性子，从零开始学 Hugo 的语法，然后四处借鉴学习，花了两天时间添加了一些功能，当然，这篇文章主要介绍相关的 feature，不会涉及到具体的实现</p><p>没有一个主题能完全满足个人的需求，还是从底层原理出发，这样才能「自由自在」地进行更改</p><h3 id=支持features>支持features<a hidden class=anchor aria-hidden=true href=#支持features>#</a></h3><p>基于的主题 <a href=https://github.com/adityatelange/hugo-PaperMod/>PaperMod</a> 的相关 features 便不在继续介绍，介绍一些我加入的特性</p><ol><li><p>公式渲染：这个主题一开始是没有公式渲染功能的，我通过引入 MathJax 来完成这一点，行内公式如：<code>$a+b=c$</code>，行间公式效果如下：</p><p><code>$$ e^{\pi i} + 1 = 0 $$</code></p><p>然而，Hugo 是先将markdown渲染成HTML，接着才会轮到Mathjax进行渲染，这就导致很多公式就渲染不出，想了两种办法：- 将公式用div标签套起来，这样就不会被误判，然而这会增加平时写公式的负担，用shortcode来完成，还是有点臃肿 - 将公式用代码的样式包裹起来，再写一点js来保留原来公式的部分，比如<code>公式</code>（公式依旧带美元符号），这个更简便</p><p>从平时的 markdown 公式书写转到带有代码样式包裹的公式可用下列代码：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>inline_replace</span><span class=p>(</span><span class=n>line</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>new_line</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span>
</span></span><span class=line><span class=cl>    <span class=n>patterns</span> <span class=o>=</span> <span class=n>line</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;$&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=n>idx</span><span class=p>,</span> <span class=n>l</span><span class=p>)</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>patterns</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>tex</span> <span class=o>=</span> <span class=s1>&#39;`$&#39;</span> <span class=k>if</span> <span class=n>idx</span> <span class=o>%</span> <span class=mi>2</span> <span class=o>==</span> <span class=mi>0</span> <span class=k>else</span> <span class=s1>&#39;$`&#39;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>idx</span> <span class=o>==</span> <span class=nb>len</span><span class=p>(</span><span class=n>patterns</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span> <span class=ow>and</span> <span class=n>tex</span> <span class=o>==</span> <span class=s1>&#39;`$&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>tex</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span>
</span></span><span class=line><span class=cl>        <span class=n>new_line</span> <span class=o>+=</span> <span class=n>l</span> <span class=o>+</span> <span class=n>tex</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>new_line</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>path</span> <span class=o>=</span> <span class=s1>&#39;content/posts/Determinantal-Point-Process.md&#39;</span>
</span></span><span class=line><span class=cl><span class=n>lines</span> <span class=o>=</span> <span class=p>[</span><span class=n>line</span><span class=o>.</span><span class=n>rstrip</span><span class=p>()</span> <span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=nb>open</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>new_lines</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=n>lines</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>line</span> <span class=o>==</span> <span class=s1>&#39;&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>new_lines</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span> <span class=o>+=</span> <span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span>
</span></span><span class=line><span class=cl>        <span class=k>continue</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>line</span> <span class=o>==</span> <span class=s1>&#39;$$&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>count</span> <span class=o>%</span> <span class=mi>2</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>new_lines</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s1>&#39;`$$&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>new_lines</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s1>&#39;$$`&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=k>continue</span>
</span></span><span class=line><span class=cl>    <span class=n>new_lines</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>inline_replace</span><span class=p>(</span><span class=n>line</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=s1>&#39;w&#39;</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=s1>&#39;utf-8&#39;</span><span class=p>)</span> <span class=k>as</span> <span class=n>w</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=n>new_lines</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>w</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>line</span> <span class=o>+</span> <span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=p>)</span>
</span></span></code></pre></div></li><li><p>伪代码的书写：引入伪代码图片实在是丑得难以接受，我通过引入额外的js来实现这一点，本身是以HTML形式书写的，为了减轻负担，立马改成了shortcode，示例如下：<div><pre id=pseudocode display:hidden;>
    \begin{algorithm}
    \caption{Quicksort}
    \begin{algorithmic}
    \PROCEDURE{Quicksort}{$A, p, r$}
    \IF{$p < r$}
    \STATE $q = $ \CALL{Partition}{$A, p, r$}
            \STATE \CALL{Quicksort}{$A, p, q - 1$}
            \STATE \CALL{Quicksort}{$A, q + 1, r$}
        \ENDIF
    \ENDPROCEDURE
    \PROCEDURE{Partition}{$A, p, r$}
        \STATE $x = A[r]$
    \STATE $i = p - 1$
    \FOR{$j = p$ \TO $r - 1$}
    \IF{$A[j] < x$}
    \STATE $i = i + 1$
    \STATE exchange
    $A[i]$ with $A[j]$
    \ENDIF
    \STATE exchange $A[i]$ with $A[r]$
    \ENDFOR
    \ENDPROCEDURE
    \end{algorithmic}
    \end{algorithm}
    </pre></div></p></li><li><p>评论功能：这个功能我在之前的主题也实现过，不同于各种基于 github 的评论系统，需要账号，waline 不需要账户，十分方便，而且可以加入很多有趣的表情，可以在页面最底部输入试试看</p></li><li><p>侧边目录：原主题对目录的设置是将目录固定放在文章顶部，这样不利于对于长文整体的把握，故而将目录移动到了侧边，并且修改了一些 css 设置，自动高亮当前目录并且给它添加下划线，这样可以清楚地发现此时的章节</p></li><li><p>MarginNote：以往 markdown 都是仅支持脚注，这样不利于文章的阅读，查看相关引用信息需要移至页面底部再返回，而 MarginNote 则给了作者更多自由的空间和方便读者阅读
<span class=sidenote-number><small class=sidenote>The Elements of Typographic Style, 2004</small></span>
而且移动至相关的标注会自动高亮对应的 MarginNote，更加方便读者阅读；同时过长会自动转行，方便进行较长的标注
<span class=sidenote-number><small class=sidenote>Sidenotes give more life and variety to the page and are the easiest of all to find and read, If carefully designed, they need not enlarge either the page or the cost of printing it.</small></span>
不过为了保持设计的简便性，没有对移动端优化（谁在手机端看文章的啊，雾）</p></li><li><p>代码渲染：原先 PaperMod 对代码的渲染真是一言难尽，属实是丑到我了，于是乎，重新自定义了相关主题，主体是用了 a11y-light.min.css 在其之上又自定义了一些颜色：<p><details><summary markdown=span>示例代码</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Model</span><span class=p>(</span><span class=n>nn</span><span class=o>.</span><span class=n>Module</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=c1># Our model</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>input_size</span><span class=p>,</span> <span class=n>output_size</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>super</span><span class=p>(</span><span class=n>Model</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=c1># for convenience</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>fc</span> <span class=o>=</span> <span class=n>nn</span><span class=o>.</span><span class=n>Linear</span><span class=p>(</span><span class=n>input_size</span><span class=p>,</span> <span class=n>output_size</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>forward</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=nb>input</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>output</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>fc</span><span class=p>(</span><span class=nb>input</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\t</span><span class=s2>In Model: input size&#34;</span><span class=p>,</span> <span class=nb>input</span><span class=o>.</span><span class=n>size</span><span class=p>(),</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;output size&#34;</span><span class=p>,</span> <span class=n>output</span><span class=o>.</span><span class=n>size</span><span class=p>())</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>output</span>
</span></span></code></pre></div></details></p></p></li><li><p>更新时间：原先主题根本没有更新时间的设置，这样不利于读者查看文章最新的时间，文章的开头便有更新的时间，可以查看</p></li><li><p>著作权声明：现在网上各种抄袭成风，需要对自己的文章进行声明，添加至文章末尾，例如本文用的是CC BY-NC-SA 4.0.
<span class=sidenote-number><small class=sidenote>Attribution-NonCommercial-ShareAlike 4.0 International</small></span></p></li><li><p>字体：原来的字体看着有点不舒服，这里将中文换成了霞鹜文楷，观感很不错，英文的话是在几个字体中选一个：-apple-system, BlinkMacSystemFont, segoe ui, Roboto, Oxygen, Ubuntu, Cantarell 这样看起来也很舒服，选取Lorem Ipsum 进行测试
<span class=sidenote-number><small class=sidenote>Dummy text to test the appearance</small></span></p></li></ol><blockquote class=quote><p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&rsquo;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.</p></blockquote><ol start=10><li><p>中英文空白：汉学家称中文和英文之间的空白字元为「盘古之白」，大抵是因为劈开了全形字和半形字之间的混沌。在书写时适当地留白会提升观感，这个是通过盘古的js来实现的，手敲空格噼里啪啦的，倒不是很方便</p></li><li><p>notice：通过shortcode 添加了各种的提示框，看起来很不错，比如：</p></li></ol><p><div class="notice notice-warning"><div class=notice-title><svg xmlns="http://www.w3.org/2000/svg" class="icon notice-icon" viewBox="0 0 576 512" fill="hsl(0, 65%, 65%)"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6.0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6.0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"/></svg></div><p>一生疏狂尽余欢，半剖肝胆入剑寒。 剑至高危如蜀道，生逢穷途行路难。</p></div><div class="notice notice-info"><div class=notice-title><svg xmlns="http://www.w3.org/2000/svg" class="icon notice-icon" viewBox="0 0 512 512" fill="hsl(30, 80%, 70%)"><path d="M256 8a248 248 0 100 496 248 248 0 000-496zm0 110a42 42 0 110 84 42 42 0 010-84zm56 254c0 7-5 12-12 12h-88c-7 0-12-5-12-12v-24c0-7 5-12 12-12h12v-64h-12c-7 0-12-5-12-12v-24c0-7 5-12 12-12h64c7 0 12 5 12 12v1e2h12c7 0 12 5 12 12v24z"/></svg></div><p>一生疏狂尽余欢，半剖肝胆入剑寒。 剑至高危如蜀道，生逢穷途行路难。</p></div><div class="notice notice-tip"><div class=notice-title><svg xmlns="http://www.w3.org/2000/svg" class="icon notice-icon" viewBox="0 0 512 512" fill="hsl(140, 65%, 65%)"><path d="M504 256A248 248 0 118 256a248 248 0 01496 0zM227 387l184-184c7-6 7-16 0-22l-22-23c-7-6-17-6-23 0L216 308l-70-70c-6-6-16-6-23 0l-22 23c-7 6-7 16 0 22l104 104c6 7 16 7 22 0z"/></svg></div><p>一生疏狂尽余欢，半剖肝胆入剑寒。 剑至高危如蜀道，生逢穷途行路难。</p></div></p><ol start=12><li><p>友链：添加了友链功能，这样方便添加别人的博客，加强朋友之间的联系，可查看主页的 Friends</p></li><li><p>对于 markdown 引用的改进，原来的引用比较丑，下面是改进后的引用：<blockquote class=quote><p>Basically, I’m not interested in doing research and I never have been… I’m interested in understanding, which is quite a different thing. And often to understand something you have to work it out yourself because no one else has done it. — David Blackwell</p></blockquote></p></li><li><p>点击图片进行放大，对于图片大，缩放多的情况，点击放大是很有必要的，不妨试试看：
<script src=https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css><script src=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js></script>
<a data-fancybox=gallery href=https://s2.loli.net/2022/06/19/ztF8gu1RnYJW4KV.jpg><figure class=align-center><img loading=lazy src=https://s2.loli.net/2022/06/19/ztF8gu1RnYJW4KV.jpg#center width=600 height=300></figure></a></p></li></ol><h3 id=致谢>致谢<a hidden class=anchor aria-hidden=true href=#致谢>#</a></h3><p>搭建自己的主题借鉴了很多别人的经验，这里列出进行致谢：</p><ol><li><p><a href=https://github.com/adityatelange/hugo-PaperMod/>PaperMod</a>，这是一开始基于的主题，感谢作者的开源</p></li><li><p>评论系统的支持，感谢 <a href=https://github.com/walinejs/waline>Waline</a>，做的很干净</p></li><li><p>关于对代码主题的更改，主要借鉴了 <a href=https://cdnjs.com/libraries/highlight.js>HightLight.js</a> 官方的<a href=https://highlightjs.org/static/demo/>demo</a></p></li><li><p>公式的渲染方面 MathJax 做的很nice</p></li><li><p>伪代码的书写主要借鉴了<a href=https://github.com/SaswatPadhi/pseudocode.js>Pseudocode.js</a>的官方教程，必须加鸡腿</p></li><li><p>侧边目录和一些 shortcode 的实现借鉴了 <a href=https://www.sulvblog.cn/>Sulv&rsquo;s Blog</a>以及 <a href=https://guanqr.com/>Guan Qirui</a></p></li><li><p>字体还得感谢 <a href=https://github.com/chawyehsu/lxgw-wenkai-webfont>霞骛文楷</a>，比那些收费的丑字体好太多了</p></li><li><p>盘古之白是通过<a href=//cdn.bootcss.com/pangu/4.0.7/pangu.min.js>pangu.js</a>实现的，点赞</p></li><li><p>MarginNote 的实现借鉴了 <a href=https://kennethfriedman.org/thoughts/2019/marginal-notes/>kennethfriedman</a>和 <a href=https://scripter.co/sidenotes-using-only-css/>scripter</a></p></li><li><p>图片放大主要用了<a href=http://fancybox.net/>fancybox</a>的功能，用起来也比较方便</p></li></ol><p>秉持着开源的精神，我的网站源码也抽离出来放在<a href=https://github.com/sherlcok314159/MyPaperMod>这里</a>，欢迎使用或者PR</p></div><blockquote class=quote-copyright>Author: Yunpengtai<p>Link: https://yunpengtai.top/posts/hello-world/<p>License: CC BY-NC-SA 4.0. You must provide a link to the source.</blockquote><footer class=post-footer><ul class=post-tags><li><a href=https://yunpengtai.top/tags/hello-world/>hello world</a></li><li><a href=https://yunpengtai.top/tags/1st-post/>1st post</a></li><li><a href=https://yunpengtai.top/tags/%E6%96%B0%E4%B8%BB%E9%A2%98/>新主题</a></li></ul><nav class=paginav><a class=prev href=https://yunpengtai.top/posts/generalized-linear-models/><span class=title>« Prev</span><br><span>Generalized Linear Models</span></a>
<a class=next href=https://yunpengtai.top/posts/diving-in-distributed-training/><span class=title>Next »</span><br><span>Diving in distributed training in PyTorch</span></a></nav></footer><!doctype html><head><link rel=stylesheet href=https://unpkg.com/@waline/client@v2/dist/waline.css></head><body><div id=waline></div><script type=module>
    import { init } from 'https://unpkg.com/@waline/client@v2/dist/waline.mjs';

    init({
      el: '#waline',
      lang: 'en',
      reaction: true, 
      theme: 'dark',
      avatar: "mp",
      serverURL: 'https:\/\/example.yunpengtai.top\/',
      emoji: [
        'https://gcore.jsdelivr.net/gh/norevi/waline-blobcatemojis@1.0/blobs',
        'https://unpkg.com/@waline/emojis@1.1.0/tw-emoji',
        'https://unpkg.com/@waline/emojis@1.1.0/bmoji'
    ],
      reaction:[
        'https://gcore.jsdelivr.net/gh/norevi/waline-blobcatemojis@1.0/blobs/ablobcatheart.png',
        'https://gcore.jsdelivr.net/gh/norevi/waline-blobcatemojis@1.0/blobs/ablobcatrainbow.png',
        'https://gcore.jsdelivr.net/gh/norevi/waline-blobcatemojis@1.0/blobs/ablobcatattentionreverse.png',
        'https://gcore.jsdelivr.net/gh/norevi/waline-blobcatemojis@1.0/blobs/ablobcatheartbroken.png',
        'https://gcore.jsdelivr.net/gh/norevi/waline-blobcatemojis@1.0/blobs/blobcatopenmouth.png',
        'https://gcore.jsdelivr.net/gh/norevi/waline-blobcatemojis@1.0/blobs/blobcatcoffee.png'
      ],
      locale: {
        placeholder: '可以匿名评论哦~ QQ邮箱可自动获取头像 Anything to say? It can be anonymous.',
        level0: '潜水',
        level1: '冒泡',
        level2: '摸鱼',
        level3: '话痨',
        level4: '话满天',
        level5: '龙王',
      }
  });
  </script></body></html></article></main><footer class=footer><span>&copy; 2024 <a href=https://yunpengtai.top>Tai's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/sherlcok314159/MyPaperMod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script type=text/javascript>(function(){let t={indentSize:"1.2em",commentDelimiter:"//",lineNumber:!1,lineNumberPunc:":",noEnd:!1,captionCount:void 0};pseudocode.renderElement(document.getElementById("pseudocode"),t)})(document)</script><script>(function(){var e,t,n,s=document.getElementsByTagName("code");for(n=0;n<s.length;){if(t=s[n],t.parentNode.tagName!=="PRE"&&t.childElementCount===0&&(e=t.textContent,/^\$[^$]/.test(e)&&/[^$]\$$/.test(e)&&(e=e.replace(/^\$/,"\\(").replace(/\$$/,"\\)"),t.textContent=e),/^\\\((.|\s)+\\\)$/.test(e)||/^\\\[(.|\s)+\\\]$/.test(e)||/^\$(.|\s)+\$$/.test(e)||/^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(e))){t.outerHTML=t.innerHTML;continue}n++}})()</script><script>(function(e,t){var s=document,o="script",n=s.createElement(o),i=s.getElementsByTagName(o)[0];n.src=e,t&&n.addEventListener("load",function(e){t(e)}),i.parentNode.insertBefore(n,i)})("//cdn.bootcss.com/pangu/4.0.7/pangu.min.js",function(){pangu.spacingPage()})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>
<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Hugo PaperMod 主题精装修 | Tai's Blog</title><meta name=keywords content="网站,折腾,主题,自定义"><meta name=description content="引子 前段时间对博客进行了整理和翻新，趁着记忆还没完全模糊，将搭建博客的细节记录下来。个人而言，对目前博客的各项功能以及美观度还是比较满意的，"><meta name=author content><link rel=canonical href=https://canonical.url/to/page><meta name=google-site-verification content="eAKh7zszsOtNde1wyq_sUo95ZPH4zTTJhR-_ol4VWDs"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=http://yunpengtai.top/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://yunpengtai.top/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://yunpengtai.top/favicon-32x32.png><link rel=apple-touch-icon href=http://yunpengtai.top/apple-touch-icon.png><link rel=mask-icon href=http://yunpengtai.top/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script>MathJax={loader:{load:["[tex]/boldsymbol"]},tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0,tags:"all",packages:{"[+]":["boldsymbol"]}}}</script><script src=https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-chtml-full.js integrity="sha256-kbAFUDxdHwlYv01zraGjvjNZayxKtdoiJ38bDTFJtaQ=" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y3CX2RWEDY"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-Y3CX2RWEDY",{anonymize_ip:!1})}</script><meta property="og:title" content="Hugo PaperMod 主题精装修"><meta property="og:description" content="引子 前段时间对博客进行了整理和翻新，趁着记忆还没完全模糊，将搭建博客的细节记录下来。个人而言，对目前博客的各项功能以及美观度还是比较满意的，"><meta property="og:type" content="article"><meta property="og:url" content="http://yunpengtai.top/posts/hugo-journey/"><meta property="og:image" content="http://yunpengtai.top/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-17T22:00:00+08:00"><meta property="article:modified_time" content="2024-12-29T18:26:00+08:00"><meta property="og:site_name" content="Tai's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://yunpengtai.top/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Hugo PaperMod 主题精装修"><meta name=twitter:description content="引子 前段时间对博客进行了整理和翻新，趁着记忆还没完全模糊，将搭建博客的细节记录下来。个人而言，对目前博客的各项功能以及美观度还是比较满意的，"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"http://yunpengtai.top/posts/"},{"@type":"ListItem","position":3,"name":"Hugo PaperMod 主题精装修","item":"http://yunpengtai.top/posts/hugo-journey/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Hugo PaperMod 主题精装修","name":"Hugo PaperMod 主题精装修","description":"引子 前段时间对博客进行了整理和翻新，趁着记忆还没完全模糊，将搭建博客的细节记录下来。个人而言，对目前博客的各项功能以及美观度还是比较满意的，","keywords":["网站","折腾","主题","自定义"],"articleBody":"引子 前段时间对博客进行了整理和翻新，趁着记忆还没完全模糊，将搭建博客的细节记录下来。个人而言，对目前博客的各项功能以及美观度还是比较满意的，而这些背后也付出了一定的努力，希望也对其他想折腾博客的人有些许帮助，那样就更好了！也作为博客分类「折腾」的第一篇，送给自己~\n注意：博客的主题是基于 Hugo 的 PaperMod 进行魔改，故而诸多相关细节未必适用于其他博客框架，请阅读理解后进行使用。另外，本博客相关源码也放在此，方便进行查阅\nMyPaperMod This is the demo of my improved PaperMod theme. You can visit the introduction: https://yunpengtai.top/posts/hello-world/ HTML 关于本文涉及的一些用法示例，可以参见本篇文章的源码\n基础知识 这里主要介绍 Hugo 主题相关的基础知识，比如文件夹代表的意思，我使用的 Hugo 版本以及常用命令等，有基础的读者应直接跳至下一节进行阅读\n组成 开始之前，先说明一个比较重要的事情，你会发现 layouts 和 assets 在 themes 下某个主题里也有，不要在主题里进行修改，否则当你主题更新后，就比较麻烦，正确做法应该是在 themes 同级目录创建\n以下即为一个 Hugo 主题常见的组成结构：\n|—— assets # 放置 css 和 js |—— css |—— js |—— content # 放置网站内容，比如 posts，或者 friends.md |—— posts |—— hello-world.md friends.md # 友链内容 |—— data # 我是只放了 SVG.toml 文件 |—— layouts # 控制网站相关的布局 |—— _default # 主题内置的布局，如 single.html 代表一个帖子的布局 |—— partials # 放置你个人魔改的部件 |—— extend_footer.html # 代码会添加到原网站的 footer 里 |—— extend_head.html # 代码会添加到原网站的 head 里 |—— shortcodes # 一些好玩的 shortcodes 命令 |—— public # 渲染后的纯 HTML 代码，刚下载未渲染不会有该目录 |—— resources # 一般不用管 |—— static # 网站的字体以及 icon 放置目录 |—— fonts favicon.ico |—— themes |—— PaperMod config.yaml # 网站的配置文件 content 目录下的路径关系，即为网站上的链接顺序，比如 hello-world.md 访问链接便为：域名/posts/hello-world/，而 friends.md 便为 域名/friends BTW，如果想在文章中引用博客内容，可以省去域名[hello-world](/posts/hello-world)\n另外，Hugo 新手可能不知道 shortcodes 是啥意思，可以理解为一种快捷指令，具体的意思也可去 Hugo 官网 查看\nconfig.yaml 里面可以放置全局参数以及 menu 等信息，根据你所使用的主题文档进行修改即可，这里不加以讨论\n调试和发布 我的 Hugo 一直是使用老版本：\nhugo version # hugo v0.117.0-b2f0696cad918fb61420a6aff173eb36662b406e linux/amd64 BuildDate=2023-08-07T12:49:48Z VendorInfo=gohugoio Hugo 常用的也就两个命令：\nhugo server # 进行本地调试 hugo # 正式渲染，结果在 public，将 public 上传至支持静态站的地方即可发布 另外关于 Hugo 中常见的变量以及支持的方法，也应该去官网查看更详细的记录，还有时常在 Hugo HTML 中出现的，类似如下内容是属于「Go」的模板函数，不只是 Go，如果有任何疑问，查看官网 doc 永远是第一选择\n{{ if or .Params.math .Site.Params.math }} ... {{ end }} 有了如上的基础知识后，我们可以来愉快的进行精装修了\n数学公式 $a=b$ 这是行内公式\n这是行间公式 $$ e=mc^2 $$\n对于写技术 blog 的同志们来说，数学公式的适配几乎是必须的，然而很多主题未对数学公式进行适配，或者只是比较随意的适配（有些情况还是不会 work），我使用的这个主题作者就在 GitHub issues 里贴了所谓的实现方案，内容如下：\n{{ if or .Params.math .Site.Params.math }} \u003clink rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css\" integrity=\"sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X\" crossorigin=\"anonymous\"\u003e \u003cscript defer src=\"https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js\" integrity=\"sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4\" crossorigin=\"anonymous\"\u003e\u003c/script\u003e \u003cscript defer src=\"https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js\" integrity=\"sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa\" crossorigin=\"anonymous\" onload=\"renderMathInElement(document.body);\"\u003e\u003c/script\u003e {{ end }} 看似基本的公式可以正常显示，然而，当公式复杂起来，上述方案就不会 work 了，比如：\n$$ \\frac{\\partial E(\\boldsymbol{w})}{\\partial z_j} = \\sum\\limits_{k}\\frac{\\partial E(\\boldsymbol{w})}{\\partial y_{k}}\\frac{\\partial y_k}{\\partial z_{j}}= \\sum\\limits_{k} (y_{k}- \\hat{y}_{k}) w_{kj}^{(2)} \\tag{5.11} $$ 有了可以渲染数学元素的工具还不够，因为你还需要保证公式的内容并没有进行修改。举个例子，当你想要渲染 a_{1} + b_{1}，而 Hugo 可能将下划线渲染成 markdown 的模式：a1 + b1，导致 mathjax 去渲染的时候找不到你原来的公式，进而导致了渲染的失败。解决方案是将带有公式的部分先用代码 block 装饰起来，避免内容被修改，接着再将代码 block 去掉，完整的送给渲染工具 借鉴了谢益辉的相关实现\n在 layouts/partials/extend_footer.html 中复制以下 js 代码：\n去掉数学公式的代码框 js \u003cscript\u003e (function () { var i, text, code, codes = document.getElementsByTagName(\"code\"); for (i = 0; i \u003c codes.length; ) { code = codes[i]; if (code.parentNode.tagName !== \"PRE\" \u0026\u0026 code.childElementCount === 0) { text = code.textContent; if (/^\\$[^$]/.test(text) \u0026\u0026 /[^$]\\$$/.test(text)) { text = text.replace(/^\\$/, \"\\\\(\").replace(/\\$$/, \"\\\\)\"); code.textContent = text; } if ( /^\\\\\\((.|\\s)+\\\\\\)$/.test(text) || /^\\\\\\[(.|\\s)+\\\\\\]$/.test(text) || /^\\$(.|\\s)+\\$$/.test(text) || /^\\\\begin\\{([^}]+)\\}(.|\\s)+\\\\end\\{[^}]+\\}$/.test(text) ) { code.outerHTML = code.innerHTML; // remove continue; } } i++; } })(); \u003c/script\u003e 接着在 layouts/partials/extend_head.html 中引用 layouts/partials/mathjax.html：由全局和网站变量来共同决定是否进行数学公式渲染 上述文件若是不存在则自己创建\n{{ if or .Params.math .Site.Params.math }} {{- partial \"mathjax.html\" .}} {{ end }} mathjax.html 的内容如下，当然我这里还加了额外的 boldsymbol 包，没有需求的可以去掉\nmathjax.html \u003cscript\u003e MathJax = { loader: { load: [\"[tex]/boldsymbol\"] }, tex: { inlineMath: [ [\"`$\", \"$`\"], [\"\\\\(\", \"\\\\)\"], ], displayMath: [ [\"`$$`\", \"`$$`\"], [\"\\\\[\", \"\\\\]\"], ], processEscapes: true, processEnvironments: true, tags: \"all\", packages: { \"[+]\": [\"boldsymbol\"] }, }, }; \u003c/script\u003e \u003cscript src=\"https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-chtml-full.js\" integrity=\"sha256-kbAFUDxdHwlYv01zraGjvjNZayxKtdoiJ38bDTFJtaQ=\" crossorigin=\"anonymous\" \u003e\u003c/script\u003e 至此，数学公式的渲染问题就解决好了，使用时把原本的公式放入 code block 即可：\n`$a=b$` 行内公式 以下是行间公式 `$$ e=mc^2 $$` 评论系统 评论系统用过很多，比如用 GitHub 来驱动，或者自部署类比如 Waline，之前一直是用 Waline，有表情包，也支持邮箱通知等。但是，技术 blog 的评论系统怎么能没有「公式的集成」呢？所以我选择了Artalk，支持公式，表情，邮箱通知，自动亮暗模式等，功能很全，作者也在积极更新~\n概念上 Artalk 分为前后端以及存储所需要的数据库，先讲前端的配置，创建 layouts/partials/artalk.html，内容如下，因为我需要用到 katex，故而引入了其 css 和 js 相关的文件，读者应根据自己需要进行取舍\n末尾处有一个自动设置亮暗的代码，逻辑就是监听负责亮暗主题切换的按钮，从而进行自动亮暗，不同主题的 element id 势必会有些许不同，故而不可照抄~\nartalk.html \u003clink rel=\"stylesheet\" href=\"https://unpkg.com/katex@0.16.7/dist/katex.min.css\" /\u003e \u003cscript src=\"https://unpkg.com/katex@0.16.7/dist/katex.min.js\"\u003e\u003c/script\u003e \u003cscript src=\"https://cdnjs.cloudflare.com/ajax/libs/artalk/2.8.6/Artalk.js\"\u003e\u003c/script\u003e \u003cscript src=\"https://unpkg.com/@artalk/plugin-katex@latest/dist/artalk-plugin-katex.js\"\u003e\u003c/script\u003e \u003cdiv id=\"Comments\"\u003e\u003c/div\u003e \u003cscript\u003e const artalk = Artalk.init({ el: \"#Comments\", // 绑定元素的 Selector pageKey: \"\", pageTitle: \"{{ .Title }}\", server: \"{{ site.Params.artalk.server }}\", // 后端地址 site: \"{{ site.Params.artalk.site }}\", // 你的站点名 darkMode: \"auto\", // 首次打开时自动亮暗模式 versionCheck: false, // 不提醒需要更新，还需要后端也设置，后端 \u003e 前端 }); document.getElementById(\"theme-toggle\").addEventListener(\"click\", () =\u003e { document.body.className.includes(\"dark\") ? artalk.setDarkMode(!1) : artalk.setDarkMode(!0); }); \u003c/script\u003e 另外，关于停用版本检测，不仅要设置前端的参数，后端的参数也需要设置为 false，具体即为 render 上的 conf.yaml\n接着在同级目录中创建 comments.html 来引用即可：\n{{ if or .Params.comments .Site.Params.comments }} {{- partial \"artalk.html\" .}} {{ end }} 关于数据库以及后端部署的部署，很大程度得益于这位网友的帖子，重复内容就不多赘述，我选择的是 Neon+Render 来分别部署数据库和后端，关于 Render 部署的详细文件，可以参考这里。这里为表情包多做一条说明，如果是希望网站支持表情包，则在 conf.yaml 中的 emoticons 项中加入表情包的远程链接\nemoticons: link_to_artalk.json 关于此文件的具体格式，可以参考我的表情包配置仓库，至此，评论系统集成也已经完毕。当然，本网站的 artalk 看上去可能与你们的有些许不同，比如表情包的大小以及没有头像，我自己又改了一些 CSS 来完成上述目标，创建 assets/css/extended/artalk.css，将 artalk 对应的 CSS 内容复制进去，然后加入以下内容\nArtalk css /* 改变表情包大小 */ img[atk-emoticon] { width: 5em; height: auto; display: initial; } /* 下列内容可能存在于原来的 CSS 文件内，请查找后进行修改 */ .atk-comment \u003e .atk-avatar img { width: 50px; height: 50px; border-radius: 3px; display: none; /* 移除头像 */ } 至于字体方面，等后面讲网站字体介绍即可，并未加其他特殊设置。关于邮箱通知，你需要去专门进行相关设置，请根据官方文档进行，比较简单，这里进行省略\n更好看 这一节主要讲为了博客变得更好看做的改变\n字体 我对博客的字体向来是比较挑剔，而且这很影响读者的观感，我比较喜欢霞鹜文楷，这款字体好看而且是开源的。不过该字体可不小，对于个人的轻量级 blog 来说，还是存在着优化的可能性，故而，我在博客上使用的是 woff2 格式文件，大小只有 2 M，直接放到了 static/fonts 目录，然后用 CSS 来控制网站整体的外观即可：\n字体 CSS 设置 @font-face { font-family: \"LXGWWenKaiScreenR\"; src: url(\"/fonts/lxgwwenkaiscreen.subset.v1.235.standard.woff2\"); } body { font-family: \"LXGWWenKaiScreenR\", -apple-system, BlinkMacSystemFont, segoe ui, Roboto, Oxygen, Ubuntu, Cantarell, open sans, helvetica neue, sans-serif; font-size: 16px; line-height: 1.6; word-break: break-word; background: var(--theme); font-display: swap; } code { font-family: \"Consolas\", \"LXGWWenKaiScreenR\"; } 代码渲染 代码渲染的主题其实也是见仁见智吧，我个人是选择了atom-one-dark/light\n这里提供一下修改方法，因为我们需要覆盖掉原先主题对于代码渲染的设置，所以在 assets/css/hljs 中创建 an-old-hope.min.css ，注意，必须为该名字，当然如果是 Hugo PaperMod 主题肯定另有不同，然后直接复制相关的 CSS 进去。\n这里唯一需要注意的是亮暗模式的设置，对于亮色模式，直接拷贝 light 即可，但对于暗色来说，则需要一些特定的限定：\nbody.dark { .hljs { color: #abb2bf; background: #282c34; } ... } 同时，需要修改亮暗模式下代码框的背景颜色，这里是直接用变量来进行替代\n代码 CSS 设置 .post-content code { margin: auto 4px; padding: 4px 6px; font-size: 0.8em; line-height: 1.5; background: var(--code-bg); } .post-content pre code { display: block; margin: auto 0; padding: 10px; background: var(--hljs-bg) !important; color: var(--content); border-radius: var(--radius); overflow-x: auto; word-break: break-all; font-family: \"Consolas\"; font-size: 15px; } 这两个变量进行设置的地方在 assets/css/core/theme-vars.css 这里：\ntheme-vars.css /* 省略的内容请拷贝原先主题对应的文件 */ :root { ... --hljs-bg: #f7f7f7; --code-bg: rgb(245, 245, 245); } .dark { ... --hljs-bg: rgb(46, 46, 51); --code-bg: rgb(55, 56, 62); } 表格 对主题自带的表格渲染也进行修改，同时适配亮暗模式，还是需要注意暗色模式下的设置\n姓名 年龄 职业 张三 30 工程师 李四 25 设计师 王五 35 医生 表格 CSS table { border-collapse: collapse; display: table; margin-bottom: 1rem; width: 100%; overflow-x: auto; -webkit-overflow-scrolling: touch; \u0026 thead th { vertical-align: bottom; border-bottom: 2px solid #dee2e6; } \u0026 td, \u0026 th { vertical-align: top; border-top: 1px solid #dee2e6; border-bottom: 1px solid #dee2e6; } \u0026 tbody tr:hover { background-color: rgba(0, 0, 0, 0.075); } \u0026 tbody tr:nth-of-type(2n + 1) { background-color: rgba(0, 0, 0, 0.05); } \u0026 tr:last-of-type { vertical-align: bottom; border-bottom: 2px solid #dee2e6; } } .dark table { border-collapse: collapse; display: table; margin-bottom: 1rem; width: 100%; overflow-x: auto; -webkit-overflow-scrolling: touch; \u0026 thead th { vertical-align: bottom; border-bottom: 2px solid var(--code-bg); } \u0026 td, \u0026 th { vertical-align: top; border-top: 1px solid var(--code-bg); border-bottom: 1px solid var(--code-bg); } \u0026 tbody tr:hover { background-color: var(--code-bg); } \u0026 tbody tr:nth-of-type(2n + 1) { background-color: var(--code-bg); } \u0026 tr:last-of-type { vertical-align: bottom; border-bottom: 2px solid var(--code-bg); } } svg icon 觉得主页上的 icon 不太好看也可以进行修改，修改的方法就是将原来主题中的 layouts/partials/svg.html 拷贝到我们的 partials 目录，然后就选择自己想要的 icon 进行修改，这样就会覆盖了\n更便于阅读 这一节主要讲博客为了更方便读者阅读做出的努力\nMermaid 图 flowchart TB Start[客户端发起请求] --\u003e fake[fake-ip 反查] fake[fake-ip 反查] --\u003e Domain[基于域名匹配规则] fake --\u003e |fakeip-filter|system[系统解析 DNS] Domain --\u003e |匹配过程中|IP[遇到 IP 规则] Domain --\u003e reject[匹配到 Reject 规则] Domain --\u003e |匹配到直连规则|Cache IP --\u003e Cache Domain --\u003e |匹配到代理规则|Remote[通过代理服务器解析域名并建立连接] Cache --\u003e |Cache 未命中|NS[匹配 nameserver-policy 并查询 ] Cache --\u003e |Cache 命中|Get NS --\u003e |匹配成功| Get[将查询到的 IP 用于匹配 IP 规则] NS --\u003e |没匹配到| NF[nameserver/fallback 并发查询] NF --\u003e Get[查询得到 IP] Get --\u003e |缓存 DNS 结果|Cache[(查询 DNS 缓存)] Mermaid js 可以可以让我们用代码的方式画流程图（如上图），在文章的概念比较多或者关系复杂时，流程图就可以让读者更容易看懂，故而也引入了 mermaid 的实现\n首先创建 layouts/_default/_markup/render-codeblock-mermaid.html，写入以下内容：\n\u003cpre class=\"mermaid\"\u003e {{- .Inner | htmlEscape | safeHTML }} \u003c/pre\u003e {{ .Page.Store.Set \"hasMermaid\" true }} 这样就可以将 mermaid 这种特殊的 codeblock 加入渲染机制里，同时设置 hasMermaid 为 true，方便后面判断是否加载 mermaid js。接着我们创建 layouts/partials/mermaid.html，来让 mermaid js 对我们写的代码进行渲染\n同时支持亮暗自动切换，大部分代码片段取自于 mermaid-js社区的讨论，然而默认的代码是初次渲染是查看 localStorage 是否包含 pref-theme，很多时候用户并未手动点击切换是不会有这个值，即为 null。我这里是判断 document.body.className 是否包含 dark 来判断，更为准确\nmermaid.html 文件 {{ if .Page.Store.Get \"hasMermaid\" }} \u003cscript src=\"https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js\"\u003e\u003c/script\u003e \u003cscript\u003e const elementCode = \".mermaid\"; const loadMermaid = function (theme) { mermaid.initialize({ theme }); mermaid.init({ theme }, document.querySelectorAll(elementCode)); }; const saveOriginalData = function () { return new Promise((resolve, reject) =\u003e { try { var els = document.querySelectorAll(elementCode), count = els.length; els.forEach((element) =\u003e { element.setAttribute(\"data-original-code\", element.innerHTML); count--; if (count == 0) { resolve(); } }); } catch (error) { reject(error); } }); }; const resetProcessed = function () { return new Promise((resolve, reject) =\u003e { try { var els = document.querySelectorAll(elementCode), count = els.length; els.forEach((element) =\u003e { if (element.getAttribute(\"data-original-code\") != null) { element.removeAttribute(\"data-processed\"); element.innerHTML = element.getAttribute(\"data-original-code\"); } count--; if (count == 0) { resolve(); } }); } catch (error) { reject(error); } }); }; saveOriginalData().catch(console.error); // 不要用 localStorage.getItem(\"pref-theme\")，因为有些时候会为 null let isdark = document.body.className.includes(\"dark\"); if (isdark) { resetProcessed().then(loadMermaid(\"dark\")).catch(console.error); } else { resetProcessed().then(loadMermaid(\"neutral\")).catch(console.error); } document.getElementById(\"theme-toggle\").addEventListener(\"click\", () =\u003e { resetProcessed(); document.body.className.includes(\"dark\") ? loadMermaid(\"neutral\") : loadMermaid(\"dark\").catch(console.error); }); \u003c/script\u003e {{ end }} 最后再在 layouts/_default/single.html 中加入引用 mermaid.html 的部分，注意，single.html 你如果一开始没有，需要先去主题 themes/PaperMod/layouts/_default/single.html 那里拷贝原来的 single.html 到上面这个地址\n\u003carticle\u003e {{- partial \"mermaid.html\" . }} \u003c/article\u003e 侧边悬浮目录 悬浮目录是比较重要的，原始的目录是固定在文章的顶部，这样不便于读者阅读时对目录有直观的把握，也不利于读者进行快速跳转。\n在 assets/css/extended/toc.css 中添加代码即可 借鉴了 sulvblog 的实现\n悬浮目录 CSS :root { --article-width: 650px; --toc-width: 230px; } .toc { margin: 0 2px 40px 2px; border: 1px solid var(--border); background: var(--entry); border-radius: var(--radius); padding: 0.4em; } .toc-container.wide { position: absolute; height: 100%; border-right: 1px solid var(--border); left: calc((var(--toc-width) * 0.9 + var(--gap)) * -1); top: calc(var(--gap) * 2); width: var(--toc-width); } .wide .toc { position: sticky; top: var(--gap); border: unset; background: unset; border-radius: unset; width: 100%; margin: 0 2px 40px 2px; } .toc details summary { cursor: zoom-in; margin-inline-start: 20px; padding: 12px 0; } .toc details[open] summary { font-weight: 500; } .toc-container.wide .toc .inner { margin: 0; } .toc .active { font-size: 110%; font-weight: 600; color: #614a85; text-decoration: underline; } .toc ul { list-style-type: circle; } .toc .inner { margin: 0 0 0 20px; padding: 0px 15px 15px 20px; font-size: 16px; /*目录显示高度*/ max-height: 83vh; overflow-y: auto; } .toc .inner::-webkit-scrollbar-thumb { /*滚动条*/ background: var(--border); border: 7px solid var(--theme); border-radius: var(--radius); } .toc li ul { margin-inline-start: calc(var(--gap) * 0.5); list-style-type: none; } .toc li { list-style: none; font-size: 0.95rem; padding-bottom: 5px; } .toc li a:hover { color: var(--secondary); } 添加修改时间 原先的主题并没有显示「修改时间」的功能，这对于读者阅读起来并不是好事情，像我阅读时就会关注文章最后一次的修改日期，否则可能会过时\n在 layouts/partials/post_meta.html 中加入以下内容即可：\n{{- if (.Param \"ShowLastMod\") -}} {{ if ne (.Lastmod.Format \"2006-01-02\") (.Date.Format \"2006-01-02\") }} {{- `$scratch.Add \"meta\" (slice (printf \"Updated:\u0026nbsp;%s\" (.Lastmod.Format (.Site.Params.dateFormat | default \"January 2, 2006\")))) }}$` {{- end -}} {{- end -}} 然后在具体的帖子里加入 lastmod 和 showLastMod 即可显示出修改的时间了\n--- title: 新的主题 date: 2022-06-19 11:10:00 +0800 lastmod: 2024-11-20 18:00:00 +0800 showLastMod: true ... --- MarginNote 这是示例 这是示例的侧边注解\n很多时候想补充说明，或者引用某些内容时，常见的脚注就必须跳转到文章末尾进行阅读，然后读者还需要跳回来，这就十分不方便，而 MarginNote 则并不会有这些问题，借由 MarginNote， 就可以在文章的侧边来显示信息，读者阅读起来也会方便很多 借鉴了 kennethfriedman 和 scripter\n首先来说相关的 CSS，主题的实现也是通过 CSS 来进行实现，以及 sidenote number 的增减，不过有些时候会有 bug，故而，为了方便起见，我索性将 number 变为固定的「#」，显示起来也比较美观\nMarginNote CSS .sidenote { float: right; position: relative; margin-right: -18vw; width: 40%; max-width: 200px; } body { counter-reset: sidenote-counter; } .sidenote-number { counter-increment: sidenote-counter; } .sidenote::before { content: \"# \"; position: relative; font-size: 0.9em; font-weight: 700; color: red; } .sidenote-number::after { content: \"#\"; vertical-align: super; font-size: 0.8em; font-weight: 700; color: #409dff; } .sidenote-number:hover .sidenote { background-color: var(--sidenote-bg); } 光有 CSS 还不够，我们上面定义的这些特殊的 HTML 元素，都得创建才行，在 layouts/shortcodes/sidenote.html 中写入以下内容\n\u003cspan class=\"sidenote-number\"\u003e\u003csmall class=\"sidenote\"\u003e{{ .Inner | markdownify }}\u003c/small\u003e\u003c/span\u003e .Inner 就代表是输入的内容，而 | markdownify 是为了支持 markdown 渲染，比如超链接等语法\n图片点击放大 Black Holes: Monsters in Space\n当图片细节很多或图片很大时，放在博客上就难免会进行大比例缩放，此时读者若是不能放大查看该图片，想必会十分苦恼，故而图片点击放大的功能也是必不可少的，具体是通过引入 fancybox 来实现：\n在 layouts/shortcodes/figure.html 中填入以下内容即可\nfigure.html \u003cscript src=\"https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js\"\u003e\u003c/script\u003e \u003clink rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css\" /\u003e \u003cscript src=\"https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js\"\u003e\u003c/script\u003e \u003ca data-fancybox=\"gallery\" href=\"{{ .Get \"src\" }}\"\u003e \u003cfigure{{ if or (.Get \"class\") (eq (.Get \"align\") \"center\") }} class=\" {{- if eq (.Get \"align\") \"center\" }}align-center {{ end }} {{- with .Get \"class\" }}{{ . }}{{- end }}\" {{- end -}}\u003e {{- if .Get \"link\" -}} \u003ca href=\"{{ .Get \"link\" }}\"{{ with .Get \"target\" }} target=\"{{ . }}\"{{ end }}{{ with .Get \"rel\" }} rel=\"{{ . }}\"{{ end }}\u003e {{- end }} \u003cimg loading=\"lazy\" src=\"{{ .Get \"src\" }}{{- if eq (.Get \"align\") \"center\" }}#center{{- end }}\" {{- if or (.Get \"alt\") (.Get \"caption\") }} alt=\"{{ with .Get \"alt\" }}{{ . }}{{ else }}{{ .Get \"caption\" | markdownify| plainify }}{{ end }}\" {{- end -}} {{- with .Get \"width\" }} width=\"{{ . }}\"{{ end -}} {{- with .Get \"height\" }} height=\"{{ . }}\"{{ end -}} /\u003e {{- if .Get \"link\" }}\u003c/a\u003e{{ end -}} {{- if or (or (.Get \"title\") (.Get \"caption\")) (.Get \"attr\") -}} \u003cfigcaption\u003e {{ with (.Get \"title\") -}} {{ . }} {{- end -}} {{- if or (.Get \"caption\") (.Get \"attr\") -}}\u003cp\u003e {{- .Get \"caption\" | markdownify -}} {{- with .Get \"attrlink\" }} \u003ca href=\"{{ . }}\"\u003e {{- end -}} {{- .Get \"attr\" | markdownify -}} {{- if .Get \"attrlink\" }}\u003c/a\u003e{{ end }}\u003c/p\u003e {{- end }} \u003c/figcaption\u003e {{- end }} \u003c/figure\u003e \u003c/a\u003e 当然上面还不止是增加了图片点击放大的功能，还加了 align，caption 等功能\n盘古之白 个人认为，中文和英文以及数字之间有空格会更加便于阅读，这个空格也被称为「盘古之白」，像是劈开了这几者之间的混沌， 实现起来也十分简便：\n在 layouts/partials/extend_footer.html 中加入以下内容：\n盘古之白配置 {{- `$highlight := resources.Get \"js/pangu.min.js\" }}$` \u003cscript\u003e (function (u, c) { var d = document, t = \"script\", o = d.createElement(t), s = d.getElementsByTagName(t)[0]; o.src = u; if (c) { o.addEventListener(\"load\", function (e) { c(e); }); } s.parentNode.insertBefore(o, s); })(\"{{ $highlight.RelPermalink }}\", function () { pangu.spacingPage(); }); \u003c/script\u003e 我这里是将 pangu.min.js 下载到了网站本地，具体是在 assets/js/pangu.min.js，当网站加载时，盘古之白会自动进行渲染\n代码折叠 示例代码 print('Acc: 100%') 对于代码比较多的 blog，比如这篇，很多代码较长会影响阅读，占用很多篇幅，如果可以折叠，需要的时候点击展开就会很方便，折叠功能实现起来也比较方便，在 layouts/shortcodes/collapse.html 中加入以下内容：\n{{ if .Get \"summary\" }} {{ else }} {{ warnf \"missing value for param 'summary': %s\" .Position }} {{ end }} \u003cp\u003e\u003cdetails {{ if (eq (.Get \"openByDefault\") true) }} open=true {{ end }}\u003e \u003csummary markdown=\"span\"\u003e{{ .Get \"summary\" | markdownify }}\u003c/summary\u003e {{ .Inner | markdownify }} \u003c/details\u003e\u003c/p\u003e 版权声明 也许你也需要修改文章末尾的版权说明，那么就在 layouts/partials/post_copyright.html 中加入自己的版权声明即可\n文章分类 有时候我们想要发表截然不同类型的文章，比如我主要会发深度学习以及 AI 相关的，但我也会写「折腾」相关的，就需要有不同的分类\n先在 config.yaml 中加入以下内容：\nparams: taxonomies: category: categories tag: tags 然后在写文章的时候，可以编辑文章的元信息来进行分类，同时还可以不在主页显示\n--- title: 新的主题 date: 2022-06-19 11:10:00 +0800 categories: [折腾] hiddenInHomeList: true ... --- 但是不在主页显示后读者就不容易找到，此时我们在 config.yaml 中额外加个 menu 即可：\nmenu: main: ... - identifier: categories name: 折腾 url: /categories/折腾 weight: 20 接着再寻找到 layouts/_default/single.html 中的 post-meta 类，在里面加入代码来让文章的元信息栏（显示时间，有多少词的地方）显示分类\n修改 single.html 加入分类信息 \u003cdiv class=\"post-meta\"\u003e {{- partial \"post_meta.html\" . -}} {{- partial \"translation_list.html\" . -}} {{- partial \"edit_post.html\" . -}} {{- partial \"post_canonical.html\" . -}} {{- $categories := .Language.Params.Taxonomies.category | default \"categories\"}} {{- $cnt := 0 }} {{- range ($.GetTerms $categories) }} {{- $cnt = add $cnt 1 }} {{- end }} {{- if gt $cnt 0 }} {{- $i := 0 }} \u003cdiv class=\"meta-item\"\u003e\u0026nbsp·\u0026nbsp {{- range ($.GetTerms $categories) }} \u003ca href=\"{{ .Permalink }}\"\u003e{{ .LinkTitle }}\u003c/a\u003e {{ $i = add $i 1 }} {{- if lt $i $cnt}} \u003cspan\u003e,\u003c/span\u003e {{- end }} {{- end }} \u003c/div\u003e {{- end }} \u003c/div\u003e {{- end }} Shortcodes 大赏 这里分享一些我比较常用的shortcode，也欢迎评论区分享你觉得有趣的\n旋转的友链 Aaron Swartz 用以缅怀自由斗士 Aaron 当鼠标悬浮至友链所对应的头像时，头像便会开始进行旋转，这个还挺有趣的，首先在 assets/css/extended/friends.css 中加入以下内容： 借鉴了 sulvblog\n旋转友链的 CSS 设置 .friendurl { text-decoration: none !important; color: black; box-shadow: none !important; } .myfriend { width: 56px !important; height: 56px !important; border-radius: 50% !important; padding: 2px; margin-top: 20px !important; margin-left: 14px !important; background-color: #fff; } .frienddiv { overflow: auto; height: 100px; width: 49%; display: inline-block !important; border-radius: 5px; background: none; -webkit-transition: all ease-out 0.3s; -moz-transition: all ease-out 0.3s; -o-transition: all ease-out 0.3s; transition: all ease-out 0.3s; } .dark .frienddiv:hover { background: var(--code-bg); } .frienddiv:hover { background: var(--theme); transition: transform 1s; webkit-transform: scale(1.1); -moz-transform: scale(1.2); -ms-transform: scale(1.2); -o-transform: scale(1.2); transform: scale(1.1); } .frienddiv:hover .frienddivleft img { transition: 0.9s !important; -webkit-transition: 0.9s !important; -moz-transition: 0.9s !important; -o-transition: 0.9s !important; -ms-transition: 0.9s !important; transform: rotate(360deg) !important; -webkit-transform: rotate(360deg) !important; -moz-transform: rotate(360deg) !important; -o-transform: rotate(360deg) !important; -ms-transform: rotate(360deg) !important; } .frienddivleft { width: 92px; float: left; margin-right: -5px; } .frienddivright { margin-top: 18px; margin-right: 18px; } .friendname { text-overflow: ellipsis; font-size: 100%; margin-bottom: 5px; color: var(--primary); } .friendinfo { text-overflow: ellipsis; font-size: 70%; color: var(--primary); } @media screen and (max-width: 600px) { .friendinfo { display: none; } .frienddivleft { width: 84px; margin: auto; } .frienddivright { height: 100%; margin: auto; display: flex; align-items: center; justify-content: center; } .friendname { font-size: 18px; } } 接着在 layouts/shortcodes/friend.html 中加入以下内容：\nfriend.html 内容 {{- if .IsNamedParams -}} \u003ca target=\"_blank\" href={{ .Get \"url\" }} title={{ .Get \"name\" }} class=\"friendurl\"\u003e \u003cdiv class=\"frienddiv\"\u003e \u003cdiv class=\"frienddivleft\"\u003e \u003cimg class=\"myfriend\" src={{ .Get \"logo\" }} /\u003e \u003c/div\u003e \u003cdiv class=\"frienddivright\"\u003e \u003cdiv class=\"friendname\"\u003e{{- .Get \"name\" -}}\u003c/div\u003e \u003cdiv class=\"friendinfo\"\u003e{{- .Get \"word\" -}}\u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/a\u003e {{- end }} Blockquote Basically, I’m not interested in doing research and I never have been… I’m interested in understanding, which is quite a different thing. And often to understand something you have to work it out yourself because no one else has done it. — David Blackwell\n这个主题原来的 blockquote 较为丑，在 layouts/shortcodes/quote.html 加入以下内容 借鉴了 Guan Qirui\nBlockquote html 设置 \u003cblockquote class=\"quote{{ range .Params }} {{ . }}{{ end }}\"\u003e {{- `$content := .Inner | markdownify -}}$` {{- if not (strings.HasPrefix `$content \"\u003cp\u003e\") }}$` {{ printf `\u003cp\u003e%s\u003c/p\u003e` `$content | safeHTML }}$` {{- else }} {{- `$content }}$` {{- end -}} \u003c/blockquote\u003e 然后创建 assets/css/extended/quote.css 并加入以下内容\nBlockquote 的 css 配置 blockquote.quote { position: relative; margin: 1em auto; padding-left: 3em; border: none; } blockquote.quote::before { position: absolute; left: 0; content: \"“\"; font-size: 3em; font-weight: bold; line-height: 1; } blockquote.quote-copyright { position: relative; margin: 2em auto; padding-left: 3em; border: none; background-color: aliceblue; } blockquote.quote-copyright::before { position: absolute; left: 0; content: \"“\"; font-size: 3em; font-weight: bold; line-height: 1; } Github 小卡片 Github 仓库小卡片对我来说还是比较重要的，因为我一般代码都会进行开源，如果可以用一种卡片的方式提醒读者开源代码所在处，就省了读者去查找的功夫了，首先在 assets/css/extended/github.css 中填入以下内容：\nGithub 卡片相关 CSS 设置 .github { border: 0px solid; border-radius: 5px; width: 95%; margin-bottom: 1em; margin-top: 1em; padding: 1em; background-color: var(--code-bg); .github_bar { margin-top: -0.6em; margin-left: 0; } .github_name { font-weight: bold; text-decoration: none; font-size: 24px; position: relative; top: -0.6em; left: 0.3em; } .github_description { margin-top: -0.3em; margin-bottom: 1em; color: var(--color-contrast-high); text-align: justify; font-size: 90%; width: 95%; transition: all 0.5s; } .github_language { margin-top: -0.6em; } .github_language_name { color: var(--color-contrast-high); font-size: 90%; margin-left: 0.5em; transition: all 0.5s; } } 接着，在 layouts/shortcodes/github.html 中加入以下内容：\ngithub.html 内容 \u003cdiv class=\"github\"\u003e \u003cdiv class=\"github_bar\"\u003e {{ replace `$.Site.Data.SVG.repository \"icon\" \"icon github-icon\" | safeHTML }}$` \u003ca class=\"github_name\" href={{ .Get \"link\" }} target=\"_blank\"\u003e{{ .Get \"name\" }}\u003c/a\u003e \u003c/div\u003e \u003cdiv class=\"github_description\"\u003e{{ .Get \"description\" }}\u003c/div\u003e \u003cdiv class=\"github_language\"\u003e {{ .Get \"language\" }} \u003c/div\u003e \u003c/div\u003e 最后在 data 中添加 SVG.toml 并加入以下内容\nrepository = '' 各种 notice 一生疏狂尽余欢，半剖肝胆入剑寒。 剑至高危如蜀道，生逢穷途行路难。\n一生疏狂尽余欢，半剖肝胆入剑寒。 剑至高危如蜀道，生逢穷途行路难。\n一生疏狂尽余欢，半剖肝胆入剑寒。 剑至高危如蜀道，生逢穷途行路难。\n一生疏狂尽余欢，半剖肝胆入剑寒。 剑至高危如蜀道，生逢穷途行路难。\n在 layouts/shortcodes 中创建 notice.html，然后复制以下内容： 借鉴了 Hugo-notice\nnotice.html 内容 {{- `$noticeType := .Get 0 -}}$` {{- `$raw := (markdownify .Inner | chomp) -}}$` {{- `$block := findRE \"(?is)^\u003c(?:address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h(?:1|2|3|4|5|6)|header|hgroup|hr|li|main|nav|noscript|ol|output|p|pre|section|table|tfoot|ul|video)\\\\b\" $`raw 1 -}} {{ `$icon := (replace (index site.Data.SVG $`noticeType) \"icon\" \"icon notice-icon\") }} \u003cdiv class=\"notice {{ `$noticeType }}\" {{ if len .Params | eq 2 }} id=\"{{ .Get 1 }}\" {{ end }}\u003e$` {{ `$icon | safeHTML }}\u003c/div\u003e$` {{- if or `$block (not $`raw) }}{{ `$raw }}{{ else }}\u003cp\u003e{{ $`raw }}\u003c/p\u003e{{ end -}} \u003c/div\u003e 接着在 assets/extended 中创建 notice.css 并填入以下内容：\nnotice.css 内容 .notice { display: flex; align-items: center; position: relative; padding: 0.6em; margin-bottom: 1em; border-radius: 4px; p:last-child { margin-bottom: 0; } .notice-title { margin-right: 0.5em; margin-top: 0.5em; .notice-icon { width: 1.2em; height: 1.2em; } } \u0026.notice-warning { background: hsla(0, 65%, 65%, 0.15); .notice-title { color: hsl(0, 65%, 65%); } } \u0026.notice-info { background: hsla(30, 80%, 70%, 0.15); .notice-title { color: hsl(30, 80%, 70%); } } \u0026.notice-note { background: hsla(200, 65%, 65%, 0.15); .notice-title { color: hsl(200, 65%, 65%); } } \u0026.notice-tip { background: hsla(140, 65%, 65%, 0.15); .notice-title { color: hsl(140, 65%, 65%); } } } 最后在 data/SVG.toml 中加入以下内容：\nnotice-warning = '' notice-info = '' notice-note = '' notice-tip = '' ","wordCount":"7778","inLanguage":"en","datePublished":"2024-12-17T22:00:00+08:00","dateModified":"2024-12-29T18:26:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://yunpengtai.top/posts/hugo-journey/"},"publisher":{"@type":"Organization","name":"Tai's Blog","logo":{"@type":"ImageObject","url":"http://yunpengtai.top/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://yunpengtai.top accesskey=h title="Home (Alt + H)">Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://yunpengtai.top/archives/ title=归档><span>归档</span></a></li><li><a href=http://yunpengtai.top/search/ title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li><li><a href=http://yunpengtai.top/categories/%E6%8A%98%E8%85%BE title=折腾><span>折腾</span></a></li><li><a href=http://yunpengtai.top/tags/ title=标签><span>标签</span></a></li><li><a href=http://yunpengtai.top/friends/ title=友人><span>友人</span></a></li><li><a href=http://yunpengtai.top/about/ title=关于><span>关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://yunpengtai.top>Home</a>&nbsp;»&nbsp;<a href=http://yunpengtai.top/posts/>Posts</a></div><h1 class=post-title>Hugo PaperMod 主题精装修</h1><div class=post-meta><span title='2024-12-17 22:00:00 +0800 CST'>December 17, 2024</span>&nbsp;·&nbsp;Updated:&nbsp;December 29, 2024&nbsp;·&nbsp;7778 words<div class=meta-item>&nbsp·&nbsp
                <a href=http://yunpengtai.top/categories/%E6%8A%98%E8%85%BE/>折腾</a></div></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%bc%95%e5%ad%90 aria-label=引子>引子</a></li><li><a href=#%e5%9f%ba%e7%a1%80%e7%9f%a5%e8%af%86 aria-label=基础知识>基础知识</a><ul><li><a href=#%e7%bb%84%e6%88%90 aria-label=组成>组成</a></li><li><a href=#%e8%b0%83%e8%af%95%e5%92%8c%e5%8f%91%e5%b8%83 aria-label=调试和发布>调试和发布</a></li></ul></li><li><a href=#%e6%95%b0%e5%ad%a6%e5%85%ac%e5%bc%8f aria-label=数学公式>数学公式</a></li><li><a href=#%e8%af%84%e8%ae%ba%e7%b3%bb%e7%bb%9f aria-label=评论系统>评论系统</a></li><li><a href=#%e6%9b%b4%e5%a5%bd%e7%9c%8b aria-label=更好看>更好看</a><ul><li><a href=#%e5%ad%97%e4%bd%93 aria-label=字体>字体</a></li><li><a href=#%e4%bb%a3%e7%a0%81%e6%b8%b2%e6%9f%93 aria-label=代码渲染>代码渲染</a></li><li><a href=#%e8%a1%a8%e6%a0%bc aria-label=表格>表格</a></li><li><a href=#svg-icon aria-label="svg icon">svg icon</a></li></ul></li><li><a href=#%e6%9b%b4%e4%be%bf%e4%ba%8e%e9%98%85%e8%af%bb aria-label=更便于阅读>更便于阅读</a><ul><li><a href=#mermaid-%e5%9b%be aria-label="Mermaid 图">Mermaid 图</a></li><li><a href=#%e4%be%a7%e8%be%b9%e6%82%ac%e6%b5%ae%e7%9b%ae%e5%bd%95 aria-label=侧边悬浮目录>侧边悬浮目录</a></li><li><a href=#%e6%b7%bb%e5%8a%a0%e4%bf%ae%e6%94%b9%e6%97%b6%e9%97%b4 aria-label=添加修改时间>添加修改时间</a></li><li><a href=#marginnote aria-label=MarginNote>MarginNote</a></li><li><a href=#%e5%9b%be%e7%89%87%e7%82%b9%e5%87%bb%e6%94%be%e5%a4%a7 aria-label=图片点击放大>图片点击放大</a></li><li><a href=#%e7%9b%98%e5%8f%a4%e4%b9%8b%e7%99%bd aria-label=盘古之白>盘古之白</a></li><li><a href=#%e4%bb%a3%e7%a0%81%e6%8a%98%e5%8f%a0 aria-label=代码折叠>代码折叠</a></li></ul></li><li><a href=#%e7%89%88%e6%9d%83%e5%a3%b0%e6%98%8e aria-label=版权声明>版权声明</a></li><li><a href=#%e6%96%87%e7%ab%a0%e5%88%86%e7%b1%bb aria-label=文章分类>文章分类</a></li><li><a href=#shortcodes-%e5%a4%a7%e8%b5%8f aria-label="Shortcodes 大赏">Shortcodes 大赏</a><ul><li><a href=#%e6%97%8b%e8%bd%ac%e7%9a%84%e5%8f%8b%e9%93%be aria-label=旋转的友链>旋转的友链</a></li><li><a href=#blockquote aria-label=Blockquote>Blockquote</a></li><li><a href=#github-%e5%b0%8f%e5%8d%a1%e7%89%87 aria-label="Github 小卡片">Github 小卡片</a></li><li><a href=#%e5%90%84%e7%a7%8d-notice aria-label="各种 notice">各种 notice</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=引子>引子<a hidden class=anchor aria-hidden=true href=#引子>#</a></h2><p>前段时间对博客进行了整理和翻新，趁着记忆还没完全模糊，将搭建博客的细节记录下来。个人而言，对目前博客的各项功能以及美观度还是比较满意的，而这些背后也付出了一定的努力，希望也对其他想折腾博客的人有些许帮助，那样就更好了！也作为博客分类「折腾」的第一篇，送给自己~</p><p>注意：博客的主题是基于 Hugo 的 <a href=https://github.com/adityatelange/hugo-PaperMod>PaperMod</a> 进行魔改，故而诸多相关细节未必适用于其他博客框架，请阅读理解后进行使用。另外，本博客相关源码也放在此，方便进行查阅</p><div class=github><div class=github_bar><svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50"><path d="M17.791 46.836C18.502 46.53 19 45.823 19 45v-5.4c0-.197.016-.402.041-.61C19.027 38.994 19.014 38.997 19 39c0 0-3 0-3.6.0-1.5.0-2.8-.6-3.4-1.8-.7-1.3-1-3.5-2.8-4.7C8.9 32.3 9.1 32 9.7 32c.6.1 1.9.9 2.7 2 .9 1.1 1.8 2 3.4 2 2.487.0 3.82-.125 4.622-.555C21.356 34.056 22.649 33 24 33v-.025c-5.668-.182-9.289-2.066-10.975-4.975-3.665.042-6.856.405-8.677.707-.058-.327-.108-.656-.151-.987 1.797-.296 4.843-.647 8.345-.714-.112-.276-.209-.559-.291-.849-3.511-.178-6.541-.039-8.187.097-.02-.332-.047-.663-.051-.999 1.649-.135 4.597-.27 8.018-.111-.079-.5-.13-1.011-.13-1.543.0-1.7.6-3.5 1.7-5-.5-1.7-1.2-5.3.2-6.6 2.7.0 4.6 1.3 5.5 2.1C21 13.4 22.9 13 25 13s4 .4 5.6 1.1c.9-.8 2.8-2.1 5.5-2.1 1.5 1.4.7 5 .2 6.6 1.1 1.5 1.7 3.2 1.6 5 0 .484-.045.951-.11 1.409 3.499-.172 6.527-.034 8.204.102-.002.337-.033.666-.051.999-1.671-.138-4.775-.28-8.359-.089-.089.336-.197.663-.325.98 3.546.046 6.665.389 8.548.689-.043.332-.093.661-.151.987-1.912-.306-5.171-.664-8.879-.682-1.665 2.878-5.22 4.755-10.777 4.974V33c2.6.0 5 3.9 5 6.6V45c0 .823.498 1.53 1.209 1.836C41.37 43.804 48 35.164 48 25 48 12.318 37.683 2 25 2S2 12.318 2 25C2 35.164 8.63 43.804 17.791 46.836z"/></svg><a class=github_name href=https://github.com/sherlcok314159/MyPaperMod target=_blank>MyPaperMod</a></div><div class=github_description>This is the demo of my improved PaperMod theme. You can visit the introduction: https://yunpengtai.top/posts/hello-world/</div><div class=github_language>HTML</div></div><p>关于本文涉及的一些用法示例，可以参见本篇文章的<a href=https://github.com/sherlcok314159/MyPaperMod/blob/main/content/posts/hugo-journey.md>源码</a></p><h2 id=基础知识>基础知识<a hidden class=anchor aria-hidden=true href=#基础知识>#</a></h2><p>这里主要介绍 Hugo 主题相关的基础知识，比如文件夹代表的意思，我使用的 Hugo 版本以及常用命令等，有基础的读者应直接跳至下一节进行阅读</p><h3 id=组成>组成<a hidden class=anchor aria-hidden=true href=#组成>#</a></h3><p>开始之前，先说明一个比较重要的事情，你会发现 layouts 和 assets 在 themes 下某个主题里也有，不要在主题里进行修改，否则当你主题更新后，就比较麻烦，正确做法应该是在 themes 同级目录创建</p><p>以下即为一个 Hugo 主题常见的组成结构：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=p>|</span>—— assets <span class=c1># 放置 css 和 js</span>
</span></span><span class=line><span class=cl>    <span class=p>|</span>—— css
</span></span><span class=line><span class=cl>    <span class=p>|</span>—— js
</span></span><span class=line><span class=cl><span class=p>|</span>—— content <span class=c1># 放置网站内容，比如 posts，或者 friends.md</span>
</span></span><span class=line><span class=cl>    <span class=p>|</span>—— posts
</span></span><span class=line><span class=cl>        <span class=p>|</span>—— hello-world.md
</span></span><span class=line><span class=cl>    friends.md <span class=c1># 友链内容</span>
</span></span><span class=line><span class=cl><span class=p>|</span>—— data <span class=c1># 我是只放了 SVG.toml 文件</span>
</span></span><span class=line><span class=cl><span class=p>|</span>—— layouts <span class=c1># 控制网站相关的布局</span>
</span></span><span class=line><span class=cl>    <span class=p>|</span>—— _default <span class=c1># 主题内置的布局，如 single.html 代表一个帖子的布局</span>
</span></span><span class=line><span class=cl>    <span class=p>|</span>—— partials <span class=c1># 放置你个人魔改的部件</span>
</span></span><span class=line><span class=cl>        <span class=p>|</span>—— extend_footer.html <span class=c1># 代码会添加到原网站的 footer 里</span>
</span></span><span class=line><span class=cl>        <span class=p>|</span>—— extend_head.html <span class=c1># 代码会添加到原网站的 head 里</span>
</span></span><span class=line><span class=cl>    <span class=p>|</span>—— shortcodes <span class=c1># 一些好玩的 shortcodes 命令</span>
</span></span><span class=line><span class=cl><span class=p>|</span>—— public <span class=c1># 渲染后的纯 HTML 代码，刚下载未渲染不会有该目录</span>
</span></span><span class=line><span class=cl><span class=p>|</span>—— resources <span class=c1># 一般不用管</span>
</span></span><span class=line><span class=cl><span class=p>|</span>—— static <span class=c1># 网站的字体以及 icon 放置目录</span>
</span></span><span class=line><span class=cl>    <span class=p>|</span>—— fonts
</span></span><span class=line><span class=cl>    favicon.ico
</span></span><span class=line><span class=cl><span class=p>|</span>—— themes
</span></span><span class=line><span class=cl>    <span class=p>|</span>—— PaperMod
</span></span><span class=line><span class=cl>config.yaml <span class=c1># 网站的配置文件</span>
</span></span></code></pre></div><p>content 目录下的路径关系，即为网站上的链接顺序，比如 hello-world.md 访问链接便为：<code>域名/posts/hello-world/</code>，而 friends.md 便为 <code>域名/friends</code>
<span class=sidenote-number><small class=sidenote>BTW，如果想在文章中引用博客内容，可以省去域名<code>[hello-world](/posts/hello-world)</code></small></span></p><p>另外，Hugo 新手可能不知道 shortcodes 是啥意思，可以理解为一种快捷指令，具体的意思也可去 <a href=https://hugo.opendocs.io/>Hugo 官网</a> 查看</p><p>config.yaml 里面可以放置全局参数以及 menu 等信息，根据你所使用的主题文档进行修改即可，这里不加以讨论</p><h3 id=调试和发布>调试和发布<a hidden class=anchor aria-hidden=true href=#调试和发布>#</a></h3><p>我的 Hugo 一直是使用老版本：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>hugo version
</span></span><span class=line><span class=cl><span class=c1># hugo v0.117.0-b2f0696cad918fb61420a6aff173eb36662b406e linux/amd64 BuildDate=2023-08-07T12:49:48Z VendorInfo=gohugoio</span>
</span></span></code></pre></div><p>Hugo 常用的也就两个命令：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>hugo server <span class=c1># 进行本地调试</span>
</span></span><span class=line><span class=cl>hugo <span class=c1># 正式渲染，结果在 public，将 public 上传至支持静态站的地方即可发布</span>
</span></span></code></pre></div><p>另外关于 Hugo 中常见的变量以及支持的方法，也应该去官网查看更详细的记录，还有时常在 Hugo HTML 中出现的，类似如下内容是属于「Go」的<a href=https://hugo.opendocs.io/functions/go-template/>模板函数</a>，不只是 Go，如果有任何疑问，查看官网 doc 永远是第一选择</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=p>{{</span> <span class=k>if</span> <span class=nx>or</span> <span class=p>.</span><span class=nx>Params</span><span class=p>.</span><span class=nx>math</span> <span class=p>.</span><span class=nx>Site</span><span class=p>.</span><span class=nx>Params</span><span class=p>.</span><span class=nx>math</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=o>...</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=nx>end</span> <span class=p>}}</span>
</span></span></code></pre></div><p>有了如上的基础知识后，我们可以来愉快的进行精装修了</p><h2 id=数学公式>数学公式<a hidden class=anchor aria-hidden=true href=#数学公式>#</a></h2><p><code>$a=b$</code> 这是行内公式</p><p>这是行间公式
<code>$$ e=mc^2 $$</code></p><p>对于写技术 blog 的同志们来说，数学公式的适配几乎是必须的，然而很多主题未对数学公式进行适配，或者只是比较随意的适配（有些情况还是不会 work），我使用的这个主题作者就在 <a href=https://github.com/adityatelange/hugo-PaperMod/issues/236>GitHub issues</a> 里贴了所谓的实现方案，内容如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=p>{{</span> <span class=k>if</span> <span class=nx>or</span> <span class=p>.</span><span class=nx>Params</span><span class=p>.</span><span class=nx>math</span> <span class=p>.</span><span class=nx>Site</span><span class=p>.</span><span class=nx>Params</span><span class=p>.</span><span class=nx>math</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nx>link</span> <span class=nx>rel</span><span class=p>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=nx>href</span><span class=p>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css&#34;</span> <span class=nx>integrity</span><span class=p>=</span><span class=s>&#34;sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X&#34;</span> <span class=nx>crossorigin</span><span class=p>=</span><span class=s>&#34;anonymous&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nx>script</span> <span class=k>defer</span> <span class=nx>src</span><span class=p>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js&#34;</span> <span class=nx>integrity</span><span class=p>=</span><span class=s>&#34;sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4&#34;</span> <span class=nx>crossorigin</span><span class=p>=</span><span class=s>&#34;anonymous&#34;</span><span class=p>&gt;&lt;</span><span class=o>/</span><span class=nx>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nx>script</span> <span class=k>defer</span> <span class=nx>src</span><span class=p>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js&#34;</span> <span class=nx>integrity</span><span class=p>=</span><span class=s>&#34;sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa&#34;</span> <span class=nx>crossorigin</span><span class=p>=</span><span class=s>&#34;anonymous&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>onload</span><span class=p>=</span><span class=s>&#34;renderMathInElement(document.body);&#34;</span><span class=p>&gt;&lt;</span><span class=o>/</span><span class=nx>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=nx>end</span> <span class=p>}}</span>
</span></span></code></pre></div><p>看似基本的公式可以正常显示，然而，当公式复杂起来，上述方案就不会 work 了，比如：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-tex data-lang=tex><span class=line><span class=cl><span class=sb>$$</span><span class=nb>
</span></span></span><span class=line><span class=cl><span class=nb></span><span class=nv>\frac</span><span class=nb>{</span><span class=nv>\partial</span><span class=nb> E</span><span class=o>(</span><span class=nv>\boldsymbol</span><span class=nb>{w}</span><span class=o>)</span><span class=nb>}{</span><span class=nv>\partial</span><span class=nb> z_j} </span><span class=o>=</span><span class=nb> </span><span class=nv>\sum\limits</span><span class=nb>_{k}</span><span class=nv>\frac</span><span class=nb>{</span><span class=nv>\partial</span><span class=nb> E</span><span class=o>(</span><span class=nv>\boldsymbol</span><span class=nb>{w}</span><span class=o>)</span><span class=nb>}{</span><span class=nv>\partial</span><span class=nb> y_{k}}</span><span class=nv>\frac</span><span class=nb>{</span><span class=nv>\partial</span><span class=nb> y_k}{</span><span class=nv>\partial</span><span class=nb> z_{j}}</span><span class=o>=</span><span class=nb> </span><span class=nv>\sum\limits</span><span class=nb>_{k} </span><span class=o>(</span><span class=nb>y_{k}</span><span class=o>-</span><span class=nb> </span><span class=nv>\hat</span><span class=nb>{y}_{k}</span><span class=o>)</span><span class=nb> w_{kj}^{</span><span class=o>(</span><span class=m>2</span><span class=o>)</span><span class=nb>} </span><span class=nv>\tag</span><span class=nb>{</span><span class=m>5</span><span class=nb>.</span><span class=m>11</span><span class=nb>}
</span></span></span><span class=line><span class=cl><span class=nb></span><span class=s>$$</span>
</span></span></code></pre></div><p>有了可以渲染数学元素的工具还不够，因为你还需要保证公式的内容并没有进行修改。举个例子，当你想要渲染 a_{1} + b_{1}，而 Hugo 可能将下划线渲染成 markdown 的模式：<code>a&lt;em>1 + b&lt;/em>1</code>，导致 mathjax 去渲染的时候找不到你原来的公式，进而导致了渲染的失败。解决方案是将带有公式的部分先用代码 block 装饰起来，避免内容被修改，接着再将代码 block 去掉，完整的送给渲染工具
<span class=sidenote-number><small class=sidenote>借鉴了<a href=https://yihui.org/cn/2017/04/mathjax-markdown/>谢益辉</a>的相关实现</small></span></p><p>在 layouts/partials/extend_footer.html 中复制以下 js 代码：</p><p><details><summary markdown=span>去掉数学公式的代码框 js</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=o>&lt;</span><span class=nx>script</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>text</span><span class=p>,</span> <span class=nx>code</span><span class=p>,</span> <span class=nx>codes</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>getElementsByTagName</span><span class=p>(</span><span class=s2>&#34;code&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=nx>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=nx>codes</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span> <span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>code</span> <span class=o>=</span> <span class=nx>codes</span><span class=p>[</span><span class=nx>i</span><span class=p>];</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span><span class=nx>code</span><span class=p>.</span><span class=nx>parentNode</span><span class=p>.</span><span class=nx>tagName</span> <span class=o>!==</span> <span class=s2>&#34;PRE&#34;</span> <span class=o>&amp;&amp;</span> <span class=nx>code</span><span class=p>.</span><span class=nx>childElementCount</span> <span class=o>===</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>text</span> <span class=o>=</span> <span class=nx>code</span><span class=p>.</span><span class=nx>textContent</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=sr>/^\$[^$]/</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>text</span><span class=p>)</span> <span class=o>&amp;&amp;</span> <span class=sr>/[^$]\$$/</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>text</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>text</span> <span class=o>=</span> <span class=nx>text</span><span class=p>.</span><span class=nx>replace</span><span class=p>(</span><span class=sr>/^\$/</span><span class=p>,</span> <span class=s2>&#34;\\(&#34;</span><span class=p>).</span><span class=nx>replace</span><span class=p>(</span><span class=sr>/\$$/</span><span class=p>,</span> <span class=s2>&#34;\\)&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>          <span class=nx>code</span><span class=p>.</span><span class=nx>textContent</span> <span class=o>=</span> <span class=nx>text</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>          <span class=sr>/^\\\((.|\s)+\\\)$/</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>text</span><span class=p>)</span> <span class=o>||</span>
</span></span><span class=line><span class=cl>          <span class=sr>/^\\\[(.|\s)+\\\]$/</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>text</span><span class=p>)</span> <span class=o>||</span>
</span></span><span class=line><span class=cl>          <span class=sr>/^\$(.|\s)+\$$/</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>text</span><span class=p>)</span> <span class=o>||</span>
</span></span><span class=line><span class=cl>          <span class=sr>/^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/</span><span class=p>.</span><span class=nx>test</span><span class=p>(</span><span class=nx>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>code</span><span class=p>.</span><span class=nx>outerHTML</span> <span class=o>=</span> <span class=nx>code</span><span class=p>.</span><span class=nx>innerHTML</span><span class=p>;</span> <span class=c1>// remove &lt;code&gt;&lt;/code&gt;
</span></span></span><span class=line><span class=cl><span class=c1></span>          <span class=k>continue</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=nx>i</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>})();</span>
</span></span><span class=line><span class=cl><span class=o>&lt;</span><span class=err>/script&gt;</span>
</span></span></code></pre></div></details></p><p>接着在 layouts/partials/extend_head.html 中引用 layouts/partials/mathjax.html：由全局和网站变量来共同决定是否进行数学公式渲染
<span class=sidenote-number><small class=sidenote>上述文件若是不存在则自己创建</small></span></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=p>{{</span> <span class=k>if</span> <span class=nx>or</span> <span class=p>.</span><span class=nx>Params</span><span class=p>.</span><span class=nx>math</span> <span class=p>.</span><span class=nx>Site</span><span class=p>.</span><span class=nx>Params</span><span class=p>.</span><span class=nx>math</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=o>-</span> <span class=nx>partial</span> <span class=s>&#34;mathjax.html&#34;</span> <span class=p>.}}</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=nx>end</span> <span class=p>}}</span>
</span></span></code></pre></div><p>mathjax.html 的内容如下，当然我这里还加了额外的 boldsymbol 包，没有需求的可以去掉</p><p><details><summary markdown=span>mathjax.html</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=nx>MathJax</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>loader</span><span class=o>:</span> <span class=p>{</span> <span class=nx>load</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;[tex]/boldsymbol&#34;</span><span class=p>]</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nx>tex</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>inlineMath</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=s2>&#34;`$&#34;</span><span class=p>,</span> <span class=s2>&#34;$`&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=s2>&#34;\\(&#34;</span><span class=p>,</span> <span class=s2>&#34;\\)&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nx>displayMath</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=s2>&#34;`$$`&#34;</span><span class=p>,</span> <span class=s2>&#34;`$$`&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=s2>&#34;\\[&#34;</span><span class=p>,</span> <span class=s2>&#34;\\]&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nx>processEscapes</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>processEnvironments</span><span class=o>:</span> <span class=kc>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>tags</span><span class=o>:</span> <span class=s2>&#34;all&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>packages</span><span class=o>:</span> <span class=p>{</span> <span class=s2>&#34;[+]&#34;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;boldsymbol&#34;</span><span class=p>]</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span>
</span></span><span class=line><span class=cl>  <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-chtml-full.js&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>integrity</span><span class=o>=</span><span class=s>&#34;sha256-kbAFUDxdHwlYv01zraGjvjNZayxKtdoiJ38bDTFJtaQ=&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>crossorigin</span><span class=o>=</span><span class=s>&#34;anonymous&#34;</span>
</span></span><span class=line><span class=cl><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div></details></p><p>至此，数学公式的渲染问题就解决好了，使用时把原本的公式放入 code block 即可：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-md data-lang=md><span class=line><span class=cl><span class=sb>`$a=b$`</span> 行内公式
</span></span><span class=line><span class=cl>以下是行间公式
</span></span><span class=line><span class=cl><span class=sb>`$$
</span></span></span><span class=line><span class=cl><span class=sb>e=mc^2
</span></span></span><span class=line><span class=cl><span class=sb>$$`</span>
</span></span></code></pre></div><h2 id=评论系统>评论系统<a hidden class=anchor aria-hidden=true href=#评论系统>#</a></h2><p>评论系统用过很多，比如用 GitHub 来驱动，或者自部署类比如 <a href=https://waline.js.org/>Waline</a>，之前一直是用 Waline，有表情包，也支持邮箱通知等。但是，技术 blog 的评论系统怎么能没有「公式的集成」呢？所以我选择了<a href=https://yunpengtai.top/posts/hello-world/>Artalk</a>，支持公式，表情，邮箱通知，自动亮暗模式等，功能很全，作者也在积极更新~</p><p>概念上 Artalk 分为前后端以及存储所需要的数据库，先讲前端的配置，创建 layouts/partials/artalk.html，内容如下，因为我需要用到 katex，故而引入了其 css 和 js 相关的文件，读者应根据自己需要进行取舍</p><p>末尾处有一个自动设置亮暗的代码，逻辑就是监听负责亮暗主题切换的按钮，从而进行自动亮暗，不同主题的 element id 势必会有些许不同，故而不可照抄~</p><p><details><summary markdown=span>artalk.html</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span>
</span></span><span class=line><span class=cl>  <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span>
</span></span><span class=line><span class=cl>  <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://unpkg.com/katex@0.16.7/dist/katex.min.css&#34;</span>
</span></span><span class=line><span class=cl><span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://unpkg.com/katex@0.16.7/dist/katex.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdnjs.cloudflare.com/ajax/libs/artalk/2.8.6/Artalk.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://unpkg.com/@artalk/plugin-katex@latest/dist/artalk-plugin-katex.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>id</span><span class=o>=</span><span class=s>&#34;Comments&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>artalk</span> <span class=o>=</span> <span class=nx>Artalk</span><span class=p>.</span><span class=nx>init</span><span class=p>({</span>
</span></span><span class=line><span class=cl>    <span class=nx>el</span><span class=o>:</span> <span class=s2>&#34;#Comments&#34;</span><span class=p>,</span> <span class=c1>// 绑定元素的 Selector
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>pageKey</span><span class=o>:</span> <span class=s2>&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>pageTitle</span><span class=o>:</span> <span class=s2>&#34;{{ .Title }}&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>server</span><span class=o>:</span> <span class=s2>&#34;{{ site.Params.artalk.server }}&#34;</span><span class=p>,</span> <span class=c1>// 后端地址
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>site</span><span class=o>:</span> <span class=s2>&#34;{{ site.Params.artalk.site }}&#34;</span><span class=p>,</span> <span class=c1>// 你的站点名
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>darkMode</span><span class=o>:</span> <span class=s2>&#34;auto&#34;</span><span class=p>,</span> <span class=c1>// 首次打开时自动亮暗模式
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>versionCheck</span><span class=o>:</span> <span class=kc>false</span><span class=p>,</span>  <span class=c1>// 不提醒需要更新，还需要后端也设置，后端 &gt; 前端
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;theme-toggle&#34;</span><span class=p>).</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&#34;click&#34;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>document</span><span class=p>.</span><span class=nx>body</span><span class=p>.</span><span class=nx>className</span><span class=p>.</span><span class=nx>includes</span><span class=p>(</span><span class=s2>&#34;dark&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=o>?</span> <span class=nx>artalk</span><span class=p>.</span><span class=nx>setDarkMode</span><span class=p>(</span><span class=o>!</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=o>:</span> <span class=nx>artalk</span><span class=p>.</span><span class=nx>setDarkMode</span><span class=p>(</span><span class=o>!</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div></details></p><p>另外，关于停用版本检测，不仅要设置前端的参数，后端的参数也需要设置为 false，具体即为 render 上的 conf.yaml</p><p>接着在同级目录中创建 comments.html 来引用即可：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=p>{{</span> <span class=k>if</span> <span class=nx>or</span> <span class=p>.</span><span class=nx>Params</span><span class=p>.</span><span class=nx>comments</span> <span class=p>.</span><span class=nx>Site</span><span class=p>.</span><span class=nx>Params</span><span class=p>.</span><span class=nx>comments</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=o>-</span> <span class=nx>partial</span> <span class=s>&#34;artalk.html&#34;</span> <span class=p>.}}</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=nx>end</span> <span class=p>}}</span>
</span></span></code></pre></div><p>关于数据库以及后端部署的部署，很大程度得益于这位网友的<a href=https://zhuanlan.zhihu.com/p/667881783>帖子</a>，重复内容就不多赘述，我选择的是 Neon+Render 来分别部署数据库和后端，关于 Render 部署的详细文件，可以参考<a href=https://github.com/LeenHawk/artalk-on-render>这里</a>。这里为表情包多做一条说明，如果是希望网站支持表情包，则在 conf.yaml 中的 emoticons 项中加入表情包的远程链接</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>emoticons</span><span class=p>:</span><span class=w> </span><span class=l>link_to_artalk.json</span><span class=w>
</span></span></span></code></pre></div><p>关于此文件的具体格式，可以参考我的表情包<a href=https://github.com/sherlcok314159/artalk-assets/blob/main/artalk.json>配置仓库</a>，至此，评论系统集成也已经完毕。当然，本网站的 artalk 看上去可能与你们的有些许不同，比如表情包的大小以及没有头像，我自己又改了一些 CSS 来完成上述目标，创建 assets/css/extended/artalk.css，将 artalk 对应的 <a href=https://cdnjs.cloudflare.com/ajax/libs/artalk/2.9.1/Artalk.css>CSS</a> 内容复制进去，然后加入以下内容</p><p><details><summary markdown=span>Artalk css</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=c>/* 改变表情包大小 */</span>
</span></span><span class=line><span class=cl><span class=nt>img</span><span class=o>[</span><span class=nt>atk-emoticon</span><span class=o>]</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>width</span><span class=p>:</span> <span class=mi>5</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>height</span><span class=p>:</span> <span class=kc>auto</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>display</span><span class=p>:</span> <span class=kc>initial</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=c>/* 下列内容可能存在于原来的 CSS 文件内，请查找后进行修改 */</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>atk-comment</span> <span class=o>&gt;</span> <span class=p>.</span><span class=nc>atk-avatar</span> <span class=nt>img</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>width</span><span class=p>:</span> <span class=mi>50</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>height</span><span class=p>:</span> <span class=mi>50</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>border-radius</span><span class=p>:</span> <span class=mi>3</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>display</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span> <span class=c>/* 移除头像 */</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></details></p><p>至于字体方面，等后面讲网站字体介绍即可，并未加其他特殊设置。关于邮箱通知，你需要去专门进行相关设置，请根据官方文档进行，比较简单，这里进行省略</p><h2 id=更好看>更好看<a hidden class=anchor aria-hidden=true href=#更好看>#</a></h2><p>这一节主要讲为了博客变得更好看做的改变</p><h3 id=字体>字体<a hidden class=anchor aria-hidden=true href=#字体>#</a></h3><p>我对博客的字体向来是比较挑剔，而且这很影响读者的观感，我比较喜欢<a href=https://github.com/chawyehsu/lxgw-wenkai-webfont>霞鹜文楷</a>，这款字体好看而且是开源的。不过该字体可不小，对于个人的轻量级 blog 来说，还是存在着优化的可能性，故而，我在博客上使用的是 woff2 格式文件，大小只有 2 M，直接放到了 static/fonts 目录，然后用 CSS 来控制网站整体的外观即可：</p><p><details><summary markdown=span>字体 CSS 设置</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>@</span><span class=k>font-face</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>font-family</span><span class=o>:</span> <span class=s2>&#34;LXGWWenKaiScreenR&#34;</span><span class=o>;</span>
</span></span><span class=line><span class=cl>  <span class=nt>src</span><span class=o>:</span> <span class=nt>url</span><span class=o>(</span><span class=s2>&#34;/fonts/lxgwwenkaiscreen.subset.v1.235.standard.woff2&#34;</span><span class=o>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>body</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>font-family</span><span class=p>:</span> <span class=s2>&#34;LXGWWenKaiScreenR&#34;</span><span class=p>,</span> <span class=o>-</span><span class=n>apple-system</span><span class=p>,</span> <span class=n>BlinkMacSystemFont</span><span class=p>,</span> <span class=n>segoe</span> <span class=n>ui</span><span class=p>,</span> <span class=n>Roboto</span><span class=p>,</span> <span class=n>Oxygen</span><span class=p>,</span> <span class=n>Ubuntu</span><span class=p>,</span> <span class=n>Cantarell</span><span class=p>,</span> <span class=kc>open</span> <span class=n>sans</span><span class=p>,</span> <span class=n>helvetica</span> <span class=n>neue</span><span class=p>,</span> <span class=kc>sans-serif</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>font-size</span><span class=p>:</span> <span class=mi>16</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>line-height</span><span class=p>:</span> <span class=mf>1.6</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>word-break</span><span class=p>:</span> <span class=kc>break-word</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>background</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>theme</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>font-display</span><span class=p>:</span> <span class=n>swap</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>code</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>font-family</span><span class=p>:</span> <span class=s2>&#34;Consolas&#34;</span><span class=p>,</span> <span class=s2>&#34;LXGWWenKaiScreenR&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></details></p><h3 id=代码渲染>代码渲染<a hidden class=anchor aria-hidden=true href=#代码渲染>#</a></h3><p>代码渲染的主题其实也是见仁见智吧，我个人是选择了<a href=https://github.com/highlightjs/highlight.js/blob/main/src/styles/atom-one-light.css>atom-one-dark/light</a></p><p>这里提供一下修改方法，因为我们需要覆盖掉原先主题对于代码渲染的设置，所以在 assets/css/hljs 中创建 an-old-hope.min.css ，注意，必须为该名字，当然如果是 Hugo PaperMod 主题肯定另有不同，然后直接复制相关的 CSS 进去。</p><p>这里唯一需要注意的是亮暗模式的设置，对于亮色模式，直接拷贝 light 即可，但对于暗色来说，则需要一些特定的限定：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=nt>body</span><span class=p>.</span><span class=nc>dark</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>.hljs</span> <span class=err>{</span>
</span></span><span class=line><span class=cl>    <span class=k>color</span><span class=p>:</span> <span class=mh>#abb2bf</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>background</span><span class=p>:</span> <span class=mh>#282c34</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=o>...</span>
</span></span><span class=line><span class=cl><span class=err>}</span>
</span></span></code></pre></div><p>同时，需要修改亮暗模式下代码框的背景颜色，这里是直接用变量来进行替代</p><p><details><summary markdown=span>代码 CSS 设置</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>.</span><span class=nc>post-content</span> <span class=nt>code</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>margin</span><span class=p>:</span> <span class=kc>auto</span> <span class=mi>4</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>padding</span><span class=p>:</span> <span class=mi>4</span><span class=kt>px</span> <span class=mi>6</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>font-size</span><span class=p>:</span> <span class=mf>0.8</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>line-height</span><span class=p>:</span> <span class=mf>1.5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>background</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>code</span><span class=o>-</span><span class=n>bg</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>post-content</span> <span class=nt>pre</span> <span class=nt>code</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>display</span><span class=p>:</span> <span class=kc>block</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>margin</span><span class=p>:</span> <span class=kc>auto</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>padding</span><span class=p>:</span> <span class=mi>10</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>background</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>hljs</span><span class=o>-</span><span class=n>bg</span><span class=p>)</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>color</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>content</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>border-radius</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>radius</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>overflow-x</span><span class=p>:</span> <span class=kc>auto</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>word-break</span><span class=p>:</span> <span class=n>break-all</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>font-family</span><span class=p>:</span> <span class=s2>&#34;Consolas&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>font-size</span><span class=p>:</span> <span class=mi>15</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></details></p><p>这两个变量进行设置的地方在 assets/css/core/theme-vars.css 这里：</p><p><details><summary markdown=span>theme-vars.css</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=c>/* 省略的内容请拷贝原先主题对应的文件 */</span>
</span></span><span class=line><span class=cl><span class=p>:</span><span class=nd>root</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>...</span>
</span></span><span class=line><span class=cl>  <span class=nv>--hljs-bg</span><span class=p>:</span> <span class=mh>#f7f7f7</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nv>--code-bg</span><span class=p>:</span> <span class=nb>rgb</span><span class=p>(</span><span class=mi>245</span><span class=p>,</span> <span class=mi>245</span><span class=p>,</span> <span class=mi>245</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>dark</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=err>...</span>
</span></span><span class=line><span class=cl>  <span class=nv>--hljs-bg</span><span class=p>:</span> <span class=nb>rgb</span><span class=p>(</span><span class=mi>46</span><span class=p>,</span> <span class=mi>46</span><span class=p>,</span> <span class=mi>51</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nv>--code-bg</span><span class=p>:</span> <span class=nb>rgb</span><span class=p>(</span><span class=mi>55</span><span class=p>,</span> <span class=mi>56</span><span class=p>,</span> <span class=mi>62</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></details></p><h3 id=表格>表格<a hidden class=anchor aria-hidden=true href=#表格>#</a></h3><p>对主题自带的表格渲染也进行修改，同时适配亮暗模式，还是需要注意暗色模式下的设置</p><table><thead><tr><th style=text-align:left>姓名</th><th style=text-align:left>年龄</th><th style=text-align:left>职业</th></tr></thead><tbody><tr><td style=text-align:left>张三</td><td style=text-align:left>30</td><td style=text-align:left>工程师</td></tr><tr><td style=text-align:left>李四</td><td style=text-align:left>25</td><td style=text-align:left>设计师</td></tr><tr><td style=text-align:left>王五</td><td style=text-align:left>35</td><td style=text-align:left>医生</td></tr></tbody></table><p><details><summary markdown=span>表格 CSS</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=nt>table</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>border-collapse</span><span class=p>:</span> <span class=kc>collapse</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>display</span><span class=p>:</span> <span class=kc>table</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>margin-bottom</span><span class=p>:</span> <span class=mi>1</span><span class=kt>rem</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>width</span><span class=p>:</span> <span class=mi>100</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>overflow-x</span><span class=p>:</span> <span class=kc>auto</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kp>-webkit-</span><span class=n>overflow-scrolling</span><span class=p>:</span> <span class=n>touch</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=err>&amp;</span> <span class=err>thead</span> <span class=err>th</span> <span class=err>{</span>
</span></span><span class=line><span class=cl>    <span class=k>vertical-align</span><span class=p>:</span> <span class=kc>bottom</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>border-bottom</span><span class=p>:</span> <span class=mi>2</span><span class=kt>px</span> <span class=kc>solid</span> <span class=mh>#dee2e6</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=o>&amp;</span> <span class=nt>td</span><span class=o>,</span>
</span></span><span class=line><span class=cl>  <span class=o>&amp;</span> <span class=nt>th</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>vertical-align</span><span class=p>:</span> <span class=kc>top</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>border-top</span><span class=p>:</span> <span class=mi>1</span><span class=kt>px</span> <span class=kc>solid</span> <span class=mh>#dee2e6</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>border-bottom</span><span class=p>:</span> <span class=mi>1</span><span class=kt>px</span> <span class=kc>solid</span> <span class=mh>#dee2e6</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=o>&amp;</span> <span class=nt>tbody</span> <span class=nt>tr</span><span class=p>:</span><span class=nd>hover</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>background-color</span><span class=p>:</span> <span class=nb>rgba</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mf>0.075</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=o>&amp;</span> <span class=nt>tbody</span> <span class=nt>tr</span><span class=p>:</span><span class=nd>nth-of-type</span><span class=o>(</span><span class=nt>2n</span> <span class=o>+</span> <span class=nt>1</span><span class=o>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>background-color</span><span class=p>:</span> <span class=nb>rgba</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mf>0.05</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=o>&amp;</span> <span class=nt>tr</span><span class=p>:</span><span class=nd>last-of-type</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>vertical-align</span><span class=p>:</span> <span class=kc>bottom</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>border-bottom</span><span class=p>:</span> <span class=mi>2</span><span class=kt>px</span> <span class=kc>solid</span> <span class=mh>#dee2e6</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=err>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>dark</span> <span class=nt>table</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>border-collapse</span><span class=p>:</span> <span class=kc>collapse</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>display</span><span class=p>:</span> <span class=kc>table</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>margin-bottom</span><span class=p>:</span> <span class=mi>1</span><span class=kt>rem</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>width</span><span class=p>:</span> <span class=mi>100</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>overflow-x</span><span class=p>:</span> <span class=kc>auto</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kp>-webkit-</span><span class=n>overflow-scrolling</span><span class=p>:</span> <span class=n>touch</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=err>&amp;</span> <span class=err>thead</span> <span class=err>th</span> <span class=err>{</span>
</span></span><span class=line><span class=cl>    <span class=k>vertical-align</span><span class=p>:</span> <span class=kc>bottom</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>border-bottom</span><span class=p>:</span> <span class=mi>2</span><span class=kt>px</span> <span class=kc>solid</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>code</span><span class=o>-</span><span class=n>bg</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=o>&amp;</span> <span class=nt>td</span><span class=o>,</span>
</span></span><span class=line><span class=cl>  <span class=o>&amp;</span> <span class=nt>th</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>vertical-align</span><span class=p>:</span> <span class=kc>top</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>border-top</span><span class=p>:</span> <span class=mi>1</span><span class=kt>px</span> <span class=kc>solid</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>code</span><span class=o>-</span><span class=n>bg</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>border-bottom</span><span class=p>:</span> <span class=mi>1</span><span class=kt>px</span> <span class=kc>solid</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>code</span><span class=o>-</span><span class=n>bg</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=o>&amp;</span> <span class=nt>tbody</span> <span class=nt>tr</span><span class=p>:</span><span class=nd>hover</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>background-color</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>code</span><span class=o>-</span><span class=n>bg</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=o>&amp;</span> <span class=nt>tbody</span> <span class=nt>tr</span><span class=p>:</span><span class=nd>nth-of-type</span><span class=o>(</span><span class=nt>2n</span> <span class=o>+</span> <span class=nt>1</span><span class=o>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>background-color</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>code</span><span class=o>-</span><span class=n>bg</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=o>&amp;</span> <span class=nt>tr</span><span class=p>:</span><span class=nd>last-of-type</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>vertical-align</span><span class=p>:</span> <span class=kc>bottom</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>border-bottom</span><span class=p>:</span> <span class=mi>2</span><span class=kt>px</span> <span class=kc>solid</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>code</span><span class=o>-</span><span class=n>bg</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=err>}</span>
</span></span></code></pre></div></details></p><h3 id=svg-icon>svg icon<a hidden class=anchor aria-hidden=true href=#svg-icon>#</a></h3><p>觉得主页上的 icon 不太好看也可以进行修改，修改的方法就是将原来主题中的 layouts/partials/svg.html 拷贝到我们的 partials 目录，然后就选择自己想要的 icon 进行修改，这样就会覆盖了</p><h2 id=更便于阅读>更便于阅读<a hidden class=anchor aria-hidden=true href=#更便于阅读>#</a></h2><p>这一节主要讲博客为了更方便读者阅读做出的努力</p><h3 id=mermaid-图>Mermaid 图<a hidden class=anchor aria-hidden=true href=#mermaid-图>#</a></h3><pre class=mermaid>flowchart TB
  Start[客户端发起请求] --&gt; fake[fake-ip 反查]
  fake[fake-ip 反查] --&gt; Domain[基于域名匹配规则]
  fake --&gt; |fakeip-filter|system[系统解析 DNS]

  Domain --&gt; |匹配过程中|IP[遇到 IP 规则]
  Domain --&gt; reject[匹配到 Reject 规则]
  Domain --&gt; |匹配到直连规则|Cache
  IP --&gt; Cache

  Domain --&gt; |匹配到代理规则|Remote[通过代理服务器解析域名并建立连接]

  Cache --&gt; |Cache 未命中|NS[匹配 nameserver-policy 并查询 ]
  Cache --&gt; |Cache 命中|Get

  NS --&gt; |匹配成功| Get[将查询到的 IP 用于匹配 IP 规则]
  NS --&gt; |没匹配到| NF[nameserver/fallback 并发查询]

  NF --&gt; Get[查询得到 IP]
  Get --&gt; |缓存 DNS 结果|Cache[(查询 DNS 缓存)]
</pre><p>Mermaid js 可以可以让我们用代码的方式画流程图（如上图），在文章的概念比较多或者关系复杂时，流程图就可以让读者更容易看懂，故而也引入了 mermaid 的实现</p><p>首先创建 <code>layouts/_default/_markup/render-codeblock-mermaid.html</code>，写入以下内容：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!-- 因为正常写会有 ```meraid ... ``` --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>pre</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;mermaid&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>   {{- .Inner | htmlEscape | safeHTML }}
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>pre</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>{{ .Page.Store.Set &#34;hasMermaid&#34; true }}
</span></span></code></pre></div><p>这样就可以将 mermaid 这种特殊的 codeblock 加入渲染机制里，同时设置 hasMermaid 为 true，方便后面判断是否加载 mermaid js。接着我们创建 <code>layouts/partials/mermaid.html</code>，来让 mermaid js 对我们写的代码进行渲染</p><p>同时支持亮暗自动切换，大部分代码片段取自于 <a href=https://github.com/mermaid-js/mermaid/issues/1945>mermaid-js</a>社区的讨论，然而默认的代码是初次渲染是查看 localStorage 是否包含 pref-theme，很多时候用户并未手动点击切换是不会有这个值，即为 null。我这里是判断 <code>document.body.className</code> 是否包含 dark 来判断，更为准确</p><p><details><summary markdown=span>mermaid.html 文件</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>{{ if .Page.Store.Get &#34;hasMermaid&#34; }}
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>elementCode</span> <span class=o>=</span> <span class=s2>&#34;.mermaid&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>loadMermaid</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>theme</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>mermaid</span><span class=p>.</span><span class=nx>initialize</span><span class=p>({</span> <span class=nx>theme</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=nx>mermaid</span><span class=p>.</span><span class=nx>init</span><span class=p>({</span> <span class=nx>theme</span> <span class=p>},</span> <span class=nb>document</span><span class=p>.</span><span class=nx>querySelectorAll</span><span class=p>(</span><span class=nx>elementCode</span><span class=p>));</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>saveOriginalData</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>((</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>var</span> <span class=nx>els</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>querySelectorAll</span><span class=p>(</span><span class=nx>elementCode</span><span class=p>),</span>
</span></span><span class=line><span class=cl>          <span class=nx>count</span> <span class=o>=</span> <span class=nx>els</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>els</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>element</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>element</span><span class=p>.</span><span class=nx>setAttribute</span><span class=p>(</span><span class=s2>&#34;data-original-code&#34;</span><span class=p>,</span> <span class=nx>element</span><span class=p>.</span><span class=nx>innerHTML</span><span class=p>);</span>
</span></span><span class=line><span class=cl>          <span class=nx>count</span><span class=o>--</span><span class=p>;</span>
</span></span><span class=line><span class=cl>          <span class=k>if</span> <span class=p>(</span><span class=nx>count</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>resolve</span><span class=p>();</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>reject</span><span class=p>(</span><span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>resetProcessed</span> <span class=o>=</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>new</span> <span class=nb>Promise</span><span class=p>((</span><span class=nx>resolve</span><span class=p>,</span> <span class=nx>reject</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=k>try</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>var</span> <span class=nx>els</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>querySelectorAll</span><span class=p>(</span><span class=nx>elementCode</span><span class=p>),</span>
</span></span><span class=line><span class=cl>          <span class=nx>count</span> <span class=o>=</span> <span class=nx>els</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=nx>els</span><span class=p>.</span><span class=nx>forEach</span><span class=p>((</span><span class=nx>element</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=k>if</span> <span class=p>(</span><span class=nx>element</span><span class=p>.</span><span class=nx>getAttribute</span><span class=p>(</span><span class=s2>&#34;data-original-code&#34;</span><span class=p>)</span> <span class=o>!=</span> <span class=kc>null</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>element</span><span class=p>.</span><span class=nx>removeAttribute</span><span class=p>(</span><span class=s2>&#34;data-processed&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=nx>element</span><span class=p>.</span><span class=nx>innerHTML</span> <span class=o>=</span> <span class=nx>element</span><span class=p>.</span><span class=nx>getAttribute</span><span class=p>(</span><span class=s2>&#34;data-original-code&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>          <span class=nx>count</span><span class=o>--</span><span class=p>;</span>
</span></span><span class=line><span class=cl>          <span class=k>if</span> <span class=p>(</span><span class=nx>count</span> <span class=o>==</span> <span class=mi>0</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>resolve</span><span class=p>();</span>
</span></span><span class=line><span class=cl>          <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>});</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span> <span class=k>catch</span> <span class=p>(</span><span class=nx>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>reject</span><span class=p>(</span><span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>saveOriginalData</span><span class=p>().</span><span class=k>catch</span><span class=p>(</span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 不要用 localStorage.getItem(&#34;pref-theme&#34;)，因为有些时候会为 null
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kd>let</span> <span class=nx>isdark</span> <span class=o>=</span> <span class=nb>document</span><span class=p>.</span><span class=nx>body</span><span class=p>.</span><span class=nx>className</span><span class=p>.</span><span class=nx>includes</span><span class=p>(</span><span class=s2>&#34;dark&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>isdark</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>resetProcessed</span><span class=p>().</span><span class=nx>then</span><span class=p>(</span><span class=nx>loadMermaid</span><span class=p>(</span><span class=s2>&#34;dark&#34;</span><span class=p>)).</span><span class=k>catch</span><span class=p>(</span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>resetProcessed</span><span class=p>().</span><span class=nx>then</span><span class=p>(</span><span class=nx>loadMermaid</span><span class=p>(</span><span class=s2>&#34;neutral&#34;</span><span class=p>)).</span><span class=k>catch</span><span class=p>(</span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nb>document</span><span class=p>.</span><span class=nx>getElementById</span><span class=p>(</span><span class=s2>&#34;theme-toggle&#34;</span><span class=p>).</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&#34;click&#34;</span><span class=p>,</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>resetProcessed</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=nb>document</span><span class=p>.</span><span class=nx>body</span><span class=p>.</span><span class=nx>className</span><span class=p>.</span><span class=nx>includes</span><span class=p>(</span><span class=s2>&#34;dark&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=o>?</span> <span class=nx>loadMermaid</span><span class=p>(</span><span class=s2>&#34;neutral&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>      <span class=o>:</span> <span class=nx>loadMermaid</span><span class=p>(</span><span class=s2>&#34;dark&#34;</span><span class=p>).</span><span class=k>catch</span><span class=p>(</span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>{{ end }}
</span></span></code></pre></div></details></p><p>最后再在 <code>layouts/_default/single.html</code> 中加入引用 mermaid.html 的部分，注意，single.html 你如果一开始没有，需要先去主题 <code>themes/PaperMod/layouts/_default/single.html</code> 那里拷贝原来的 single.html 到上面这个地址</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>article</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=c>&lt;!-- 省略上面的 --&gt;</span>
</span></span><span class=line><span class=cl>  {{- partial &#34;mermaid.html&#34; . }}
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>article</span><span class=p>&gt;</span>
</span></span></code></pre></div><h3 id=侧边悬浮目录>侧边悬浮目录<a hidden class=anchor aria-hidden=true href=#侧边悬浮目录>#</a></h3><p>悬浮目录是比较重要的，原始的目录是固定在文章的顶部，这样不便于读者阅读时对目录有直观的把握，也不利于读者进行快速跳转。</p><p>在 assets/css/extended/toc.css 中添加代码即可
<span class=sidenote-number><small class=sidenote>借鉴了 <a href=https://github.com/xyming108/sulv-hugo-papermod/blob/main/assets/css/extended/toc.css>sulvblog</a> 的实现</small></span></p><p><details><summary markdown=span>悬浮目录 CSS</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>:</span><span class=nd>root</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nv>--article-width</span><span class=p>:</span> <span class=mi>650</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nv>--toc-width</span><span class=p>:</span> <span class=mi>230</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>toc</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>margin</span><span class=p>:</span> <span class=mi>0</span> <span class=mi>2</span><span class=kt>px</span> <span class=mi>40</span><span class=kt>px</span> <span class=mi>2</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>border</span><span class=p>:</span> <span class=mi>1</span><span class=kt>px</span> <span class=kc>solid</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>border</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>background</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>entry</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>border-radius</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>radius</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>padding</span><span class=p>:</span> <span class=mf>0.4</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>toc-container</span><span class=p>.</span><span class=nc>wide</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>position</span><span class=p>:</span> <span class=kc>absolute</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>height</span><span class=p>:</span> <span class=mi>100</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>border-right</span><span class=p>:</span> <span class=mi>1</span><span class=kt>px</span> <span class=kc>solid</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>border</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>left</span><span class=p>:</span> <span class=nb>calc</span><span class=p>((</span><span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>toc</span><span class=o>-</span><span class=n>width</span><span class=p>)</span> <span class=o>*</span> <span class=mf>0.9</span> <span class=o>+</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>gap</span><span class=p>))</span> <span class=o>*</span> <span class=mi>-1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>top</span><span class=p>:</span> <span class=nb>calc</span><span class=p>(</span><span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>gap</span><span class=p>)</span> <span class=o>*</span> <span class=mi>2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>width</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>toc</span><span class=o>-</span><span class=n>width</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>wide</span> <span class=p>.</span><span class=nc>toc</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>position</span><span class=p>:</span> <span class=kc>sticky</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>top</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>gap</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>border</span><span class=p>:</span> <span class=kc>unset</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>background</span><span class=p>:</span> <span class=kc>unset</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>border-radius</span><span class=p>:</span> <span class=kc>unset</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>width</span><span class=p>:</span> <span class=mi>100</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>margin</span><span class=p>:</span> <span class=mi>0</span> <span class=mi>2</span><span class=kt>px</span> <span class=mi>40</span><span class=kt>px</span> <span class=mi>2</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>toc</span> <span class=nt>details</span> <span class=nt>summary</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>cursor</span><span class=p>:</span> <span class=kc>zoom-in</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>margin-inline-start</span><span class=p>:</span> <span class=mi>20</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>padding</span><span class=p>:</span> <span class=mi>12</span><span class=kt>px</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>toc</span> <span class=nt>details</span><span class=o>[</span><span class=nt>open</span><span class=o>]</span> <span class=nt>summary</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>font-weight</span><span class=p>:</span> <span class=mi>500</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>toc-container</span><span class=p>.</span><span class=nc>wide</span> <span class=p>.</span><span class=nc>toc</span> <span class=p>.</span><span class=nc>inner</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>margin</span><span class=p>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>toc</span> <span class=p>.</span><span class=nc>active</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>font-size</span><span class=p>:</span> <span class=mi>110</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>font-weight</span><span class=p>:</span> <span class=mi>600</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>color</span><span class=p>:</span> <span class=mh>#614a85</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>text-decoration</span><span class=p>:</span> <span class=kc>underline</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>toc</span> <span class=nt>ul</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>list-style-type</span><span class=p>:</span> <span class=kc>circle</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>toc</span> <span class=p>.</span><span class=nc>inner</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>margin</span><span class=p>:</span> <span class=mi>0</span> <span class=mi>0</span> <span class=mi>0</span> <span class=mi>20</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>padding</span><span class=p>:</span> <span class=mi>0</span><span class=kt>px</span> <span class=mi>15</span><span class=kt>px</span> <span class=mi>15</span><span class=kt>px</span> <span class=mi>20</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>font-size</span><span class=p>:</span> <span class=mi>16</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c>/*目录显示高度*/</span>
</span></span><span class=line><span class=cl>  <span class=k>max-height</span><span class=p>:</span> <span class=mi>83</span><span class=kt>vh</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>overflow-y</span><span class=p>:</span> <span class=kc>auto</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>toc</span> <span class=p>.</span><span class=nc>inner</span><span class=p>::</span><span class=nd>-webkit-scrollbar-thumb</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c>/*滚动条*/</span>
</span></span><span class=line><span class=cl>  <span class=k>background</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>border</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>border</span><span class=p>:</span> <span class=mi>7</span><span class=kt>px</span> <span class=kc>solid</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>theme</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>border-radius</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>radius</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>toc</span> <span class=nt>li</span> <span class=nt>ul</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>margin-inline-start</span><span class=p>:</span> <span class=nb>calc</span><span class=p>(</span><span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>gap</span><span class=p>)</span> <span class=o>*</span> <span class=mf>0.5</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>list-style-type</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>toc</span> <span class=nt>li</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>list-style</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>font-size</span><span class=p>:</span> <span class=mf>0.95</span><span class=kt>rem</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>padding-bottom</span><span class=p>:</span> <span class=mi>5</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>toc</span> <span class=nt>li</span> <span class=nt>a</span><span class=p>:</span><span class=nd>hover</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>color</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>secondary</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></details></p><h3 id=添加修改时间>添加修改时间<a hidden class=anchor aria-hidden=true href=#添加修改时间>#</a></h3><p>原先的主题并没有显示「修改时间」的功能，这对于读者阅读起来并不是好事情，像我阅读时就会关注文章最后一次的修改日期，否则可能会过时</p><p>在 layouts/partials/post_meta.html 中加入以下内容即可：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=p>{{</span><span class=o>-</span> <span class=k>if</span> <span class=p>(.</span><span class=nx>Param</span> <span class=s>&#34;ShowLastMod&#34;</span><span class=p>)</span> <span class=o>-</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=p>{{</span> <span class=k>if</span> <span class=nf>ne</span> <span class=p>(.</span><span class=nx>Lastmod</span><span class=p>.</span><span class=nx>Format</span> <span class=s>&#34;2006-01-02&#34;</span><span class=p>)</span> <span class=p>(.</span><span class=nx>Date</span><span class=p>.</span><span class=nx>Format</span> <span class=s>&#34;2006-01-02&#34;</span><span class=p>)</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl>    <span class=p>{{</span><span class=o>-</span> <span class=s>`$scratch.Add &#34;meta&#34; (slice (printf &#34;Updated:&amp;nbsp;%s&#34; (.Lastmod.Format (.Site.Params.dateFormat | default &#34;January 2, 2006&#34;)))) }}$`</span>
</span></span><span class=line><span class=cl>  <span class=p>{{</span><span class=o>-</span> <span class=nx>end</span> <span class=o>-</span><span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=o>-</span> <span class=nx>end</span> <span class=o>-</span><span class=p>}}</span>
</span></span></code></pre></div><p>然后在具体的帖子里加入 lastmod 和 showLastMod 即可显示出修改的时间了</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>title</span><span class=p>:</span><span class=w> </span><span class=l>新的主题</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>date</span><span class=p>:</span><span class=w> </span><span class=ld>2022-06-19 11:10:00 +0800</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>lastmod</span><span class=p>:</span><span class=w> </span><span class=ld>2024-11-20 18:00:00 +0800</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>showLastMod</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span></code></pre></div><h3 id=marginnote>MarginNote<a hidden class=anchor aria-hidden=true href=#marginnote>#</a></h3><p>这是示例
<span class=sidenote-number><small class=sidenote>这是示例的侧边注解</small></span></p><p>很多时候想补充说明，或者引用某些内容时，常见的脚注就必须跳转到文章末尾进行阅读，然后读者还需要跳回来，这就十分不方便，而 MarginNote 则并不会有这些问题，借由 MarginNote， 就可以在文章的侧边来显示信息，读者阅读起来也会方便很多
<span class=sidenote-number><small class=sidenote>借鉴了 <a href=https://kennethfriedman.org/thoughts/2019/marginal-notes/>kennethfriedman</a> 和 <a href=https://scripter.co/sidenotes-using-only-css/>scripter</a></small></span></p><p>首先来说相关的 CSS，主题的实现也是通过 CSS 来进行实现，以及 sidenote number 的增减，不过有些时候会有 bug，故而，为了方便起见，我索性将 number 变为固定的「#」，显示起来也比较美观</p><p><details><summary markdown=span>MarginNote CSS</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>.</span><span class=nc>sidenote</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>float</span><span class=p>:</span> <span class=kc>right</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>position</span><span class=p>:</span> <span class=kc>relative</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>margin-right</span><span class=p>:</span> <span class=mi>-18</span><span class=kt>vw</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>width</span><span class=p>:</span> <span class=mi>40</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>max-width</span><span class=p>:</span> <span class=mi>200</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nt>body</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>counter-reset</span><span class=p>:</span> <span class=n>sidenote-counter</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>sidenote-number</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>counter-increment</span><span class=p>:</span> <span class=n>sidenote-counter</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>sidenote</span><span class=p>::</span><span class=nd>before</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>content</span><span class=p>:</span> <span class=s2>&#34;# &#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>position</span><span class=p>:</span> <span class=kc>relative</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>font-size</span><span class=p>:</span> <span class=mf>0.9</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>font-weight</span><span class=p>:</span> <span class=mi>700</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>color</span><span class=p>:</span> <span class=kc>red</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>sidenote-number</span><span class=p>::</span><span class=nd>after</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>content</span><span class=p>:</span> <span class=s2>&#34;#&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>vertical-align</span><span class=p>:</span> <span class=kc>super</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>font-size</span><span class=p>:</span> <span class=mf>0.8</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>font-weight</span><span class=p>:</span> <span class=mi>700</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>color</span><span class=p>:</span> <span class=mh>#409dff</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>sidenote-number</span><span class=p>:</span><span class=nd>hover</span> <span class=p>.</span><span class=nc>sidenote</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>background-color</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>sidenote</span><span class=o>-</span><span class=n>bg</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></details></p><p>光有 CSS 还不够，我们上面定义的这些特殊的 HTML 元素，都得创建才行，在 layouts/shortcodes/sidenote.html 中写入以下内容</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sidenote-number&#34;</span><span class=p>&gt;&lt;</span><span class=nt>small</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;sidenote&#34;</span><span class=p>&gt;</span>{{ .Inner | markdownify }}<span class=p>&lt;/</span><span class=nt>small</span><span class=p>&gt;&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span></code></pre></div><p>.Inner 就代表是输入的内容，而 | markdownify 是为了支持 markdown 渲染，比如超链接等语法</p><h3 id=图片点击放大>图片点击放大<a hidden class=anchor aria-hidden=true href=#图片点击放大>#</a></h3><script src=https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css><script src=https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js></script>
<a data-fancybox=gallery href=https://s2.loli.net/2022/06/19/ztF8gu1RnYJW4KV.jpg><figure class=align-center><img loading=lazy src=https://s2.loli.net/2022/06/19/ztF8gu1RnYJW4KV.jpg#center alt="Black Holes: Monsters in Space" width=600px height=300px><figcaption><p><a href=https://www.nasa.gov/image-article/black-holes-monsters-space/>Black Holes: Monsters in Space</a></p></figcaption></figure></a><p>当图片细节很多或图片很大时，放在博客上就难免会进行大比例缩放，此时读者若是不能放大查看该图片，想必会十分苦恼，故而图片点击放大的功能也是必不可少的，具体是通过引入 <a href=http://fancybox.net/>fancybox</a> 来实现：</p><p>在 layouts/shortcodes/figure.html 中填入以下内容即可</p><p><details><summary markdown=span>figure.html</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>link</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;stylesheet&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css&#34;</span> <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>a</span> <span class=na>data-fancybox</span><span class=o>=</span><span class=s>&#34;gallery&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;{{ .Get &#34;</span><span class=na>src</span><span class=err>&#34;</span> <span class=err>}}&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>figure</span><span class=err>{{</span> <span class=na>if</span> <span class=na>or</span> <span class=err>(.</span><span class=na>Get</span> <span class=err>&#34;</span><span class=na>class</span><span class=err>&#34;)</span> <span class=err>(</span><span class=na>eq</span> <span class=err>(.</span><span class=na>Get</span> <span class=err>&#34;</span><span class=na>align</span><span class=err>&#34;)</span> <span class=err>&#34;</span><span class=na>center</span><span class=err>&#34;)</span> <span class=err>}}</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;
</span></span></span><span class=line><span class=cl><span class=s>           {{- if eq (.Get &#34;</span><span class=na>align</span><span class=err>&#34;)</span> <span class=err>&#34;</span><span class=na>center</span><span class=err>&#34;</span> <span class=err>}}</span><span class=na>align-center</span> <span class=err>{{</span> <span class=na>end</span> <span class=err>}}</span>
</span></span><span class=line><span class=cl>           <span class=err>{{</span><span class=na>-</span> <span class=na>with</span> <span class=err>.</span><span class=na>Get</span> <span class=err>&#34;</span><span class=na>class</span><span class=err>&#34;</span> <span class=err>}}{{</span> <span class=err>.</span> <span class=err>}}{{</span><span class=na>-</span> <span class=na>end</span> <span class=err>}}&#34;</span>
</span></span><span class=line><span class=cl><span class=err>{{</span><span class=na>-</span> <span class=na>end</span> <span class=na>-</span><span class=err>}}</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    {{- if .Get &#34;link&#34; -}}
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;{{ .Get &#34;</span><span class=na>link</span><span class=err>&#34;</span> <span class=err>}}&#34;{{</span> <span class=na>with</span> <span class=err>.</span><span class=na>Get</span> <span class=err>&#34;</span><span class=na>target</span><span class=err>&#34;</span> <span class=err>}}</span> <span class=na>target</span><span class=o>=</span><span class=s>&#34;{{ . }}&#34;</span><span class=err>{{</span> <span class=na>end</span> <span class=err>}}{{</span> <span class=na>with</span> <span class=err>.</span><span class=na>Get</span> <span class=err>&#34;</span><span class=na>rel</span><span class=err>&#34;</span> <span class=err>}}</span> <span class=na>rel</span><span class=o>=</span><span class=s>&#34;{{ . }}&#34;</span><span class=err>{{</span> <span class=na>end</span> <span class=err>}}</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    {{- end }}
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>img</span> <span class=na>loading</span><span class=o>=</span><span class=s>&#34;lazy&#34;</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;{{ .Get &#34;</span><span class=na>src</span><span class=err>&#34;</span> <span class=err>}}{{</span><span class=na>-</span> <span class=na>if</span> <span class=na>eq</span> <span class=err>(.</span><span class=na>Get</span> <span class=err>&#34;</span><span class=na>align</span><span class=err>&#34;)</span> <span class=err>&#34;</span><span class=na>center</span><span class=err>&#34;</span> <span class=err>}}#</span><span class=na>center</span><span class=err>{{</span><span class=na>-</span> <span class=na>end</span> <span class=err>}}&#34;</span>
</span></span><span class=line><span class=cl>         <span class=err>{{</span><span class=na>-</span> <span class=na>if</span> <span class=na>or</span> <span class=err>(.</span><span class=na>Get</span> <span class=err>&#34;</span><span class=na>alt</span><span class=err>&#34;)</span> <span class=err>(.</span><span class=na>Get</span> <span class=err>&#34;</span><span class=na>caption</span><span class=err>&#34;)</span> <span class=err>}}</span>
</span></span><span class=line><span class=cl>         <span class=na>alt</span><span class=o>=</span><span class=s>&#34;{{ with .Get &#34;</span><span class=na>alt</span><span class=err>&#34;</span> <span class=err>}}{{</span> <span class=err>.</span> <span class=err>}}{{</span> <span class=na>else</span> <span class=err>}}{{</span> <span class=err>.</span><span class=na>Get</span> <span class=err>&#34;</span><span class=na>caption</span><span class=err>&#34;</span> <span class=err>|</span> <span class=na>markdownify</span><span class=err>|</span> <span class=na>plainify</span> <span class=err>}}{{</span> <span class=na>end</span> <span class=err>}}&#34;</span>
</span></span><span class=line><span class=cl>         <span class=err>{{</span><span class=na>-</span> <span class=na>end</span> <span class=na>-</span><span class=err>}}</span>
</span></span><span class=line><span class=cl>         <span class=err>{{</span><span class=na>-</span> <span class=na>with</span> <span class=err>.</span><span class=na>Get</span> <span class=err>&#34;</span><span class=na>width</span><span class=err>&#34;</span> <span class=err>}}</span> <span class=na>width</span><span class=o>=</span><span class=s>&#34;{{ . }}&#34;</span><span class=err>{{</span> <span class=na>end</span> <span class=na>-</span><span class=err>}}</span>
</span></span><span class=line><span class=cl>         <span class=err>{{</span><span class=na>-</span> <span class=na>with</span> <span class=err>.</span><span class=na>Get</span> <span class=err>&#34;</span><span class=na>height</span><span class=err>&#34;</span> <span class=err>}}</span> <span class=na>height</span><span class=o>=</span><span class=s>&#34;{{ . }}&#34;</span><span class=err>{{</span> <span class=na>end</span> <span class=na>-</span><span class=err>}}</span>
</span></span><span class=line><span class=cl>    <span class=p>/&gt;</span> <span class=c>&lt;!-- Closing img tag --&gt;</span>
</span></span><span class=line><span class=cl>    {{- if .Get &#34;link&#34; }}<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>{{ end -}}
</span></span><span class=line><span class=cl>    {{- if or (or (.Get &#34;title&#34;) (.Get &#34;caption&#34;)) (.Get &#34;attr&#34;) -}}
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>figcaption</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            {{ with (.Get &#34;title&#34;) -}}
</span></span><span class=line><span class=cl>                {{ . }}
</span></span><span class=line><span class=cl>            {{- end -}}
</span></span><span class=line><span class=cl>            {{- if or (.Get &#34;caption&#34;) (.Get &#34;attr&#34;) -}}<span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                {{- .Get &#34;caption&#34; | markdownify -}}
</span></span><span class=line><span class=cl>                {{- with .Get &#34;attrlink&#34; }}
</span></span><span class=line><span class=cl>                    <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;{{ . }}&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                {{- end -}}
</span></span><span class=line><span class=cl>                {{- .Get &#34;attr&#34; | markdownify -}}
</span></span><span class=line><span class=cl>                {{- if .Get &#34;attrlink&#34; }}<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>{{ end }}<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>            {{- end }}
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>figcaption</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    {{- end }}
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>figure</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span></code></pre></div></details></p><p>当然上面还不止是增加了图片点击放大的功能，还加了 align，caption 等功能</p><h3 id=盘古之白>盘古之白<a hidden class=anchor aria-hidden=true href=#盘古之白>#</a></h3><p>个人认为，中文和英文以及数字之间有空格会更加便于阅读，这个空格也被称为「盘古之白」，像是劈开了这几者之间的混沌， 实现起来也十分简便：</p><p>在 layouts/partials/extend_footer.html 中加入以下内容：</p><p><details><summary markdown=span>盘古之白配置</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>{{- `$highlight := resources.Get &#34;js/pangu.min.js&#34; }}$`
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>(</span><span class=kd>function</span> <span class=p>(</span><span class=nx>u</span><span class=p>,</span> <span class=nx>c</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=nx>d</span> <span class=o>=</span> <span class=nb>document</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>t</span> <span class=o>=</span> <span class=s2>&#34;script&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>o</span> <span class=o>=</span> <span class=nx>d</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=nx>t</span><span class=p>),</span>
</span></span><span class=line><span class=cl>      <span class=nx>s</span> <span class=o>=</span> <span class=nx>d</span><span class=p>.</span><span class=nx>getElementsByTagName</span><span class=p>(</span><span class=nx>t</span><span class=p>)[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=nx>o</span><span class=p>.</span><span class=nx>src</span> <span class=o>=</span> <span class=nx>u</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>c</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>o</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&#34;load&#34;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>(</span><span class=nx>e</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>c</span><span class=p>(</span><span class=nx>e</span><span class=p>);</span>
</span></span><span class=line><span class=cl>      <span class=p>});</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>s</span><span class=p>.</span><span class=nx>parentNode</span><span class=p>.</span><span class=nx>insertBefore</span><span class=p>(</span><span class=nx>o</span><span class=p>,</span> <span class=nx>s</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>})(</span><span class=s2>&#34;{{ $highlight.RelPermalink }}&#34;</span><span class=p>,</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>pangu</span><span class=p>.</span><span class=nx>spacingPage</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span></code></pre></div></details></p><p>我这里是将 pangu.min.js 下载到了网站本地，具体是在 assets/js/pangu.min.js，当网站加载时，盘古之白会自动进行渲染</p><h3 id=代码折叠>代码折叠<a hidden class=anchor aria-hidden=true href=#代码折叠>#</a></h3><p><details><summary markdown=span>示例代码</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;Acc: 100%&#39;</span><span class=p>)</span>
</span></span></code></pre></div></details></p><p>对于代码比较多的 blog，比如这篇，很多代码较长会影响阅读，占用很多篇幅，如果可以折叠，需要的时候点击展开就会很方便，折叠功能实现起来也比较方便，在 layouts/shortcodes/collapse.html 中加入以下内容：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=p>{{</span> <span class=k>if</span> <span class=p>.</span><span class=nx>Get</span> <span class=s>&#34;summary&#34;</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=k>else</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=nx>warnf</span> <span class=s>&#34;missing value for param &#39;summary&#39;: %s&#34;</span> <span class=p>.</span><span class=nx>Position</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=nx>end</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nx>p</span><span class=p>&gt;&lt;</span><span class=nx>details</span> <span class=p>{{</span> <span class=k>if</span> <span class=p>(</span><span class=nf>eq</span> <span class=p>(.</span><span class=nx>Get</span> <span class=s>&#34;openByDefault&#34;</span><span class=p>)</span> <span class=kc>true</span><span class=p>)</span> <span class=p>}}</span> <span class=nx>open</span><span class=p>=</span><span class=kc>true</span> <span class=p>{{</span> <span class=nx>end</span> <span class=p>}}&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nx>summary</span> <span class=nx>markdown</span><span class=p>=</span><span class=s>&#34;span&#34;</span><span class=p>&gt;{{</span> <span class=p>.</span><span class=nx>Get</span> <span class=s>&#34;summary&#34;</span> <span class=p>|</span> <span class=nx>markdownify</span> <span class=p>}}&lt;</span><span class=o>/</span><span class=nx>summary</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>{{</span> <span class=p>.</span><span class=nx>Inner</span> <span class=p>|</span> <span class=nx>markdownify</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=o>/</span><span class=nx>details</span><span class=p>&gt;&lt;</span><span class=o>/</span><span class=nx>p</span><span class=p>&gt;</span>
</span></span></code></pre></div><h2 id=版权声明>版权声明<a hidden class=anchor aria-hidden=true href=#版权声明>#</a></h2><p>也许你也需要修改文章末尾的版权说明，那么就在 layouts/partials/post_copyright.html 中加入自己的版权声明即可</p><h2 id=文章分类>文章分类<a hidden class=anchor aria-hidden=true href=#文章分类>#</a></h2><p>有时候我们想要发表截然不同类型的文章，比如我主要会发深度学习以及 AI 相关的，但我也会写「折腾」相关的，就需要有不同的分类</p><p>先在 config.yaml 中加入以下内容：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>params</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>taxonomies</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>category</span><span class=p>:</span><span class=w> </span><span class=l>categories</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>tag</span><span class=p>:</span><span class=w> </span><span class=l>tags</span><span class=w>
</span></span></span></code></pre></div><p>然后在写文章的时候，可以编辑文章的元信息来进行分类，同时还可以不在主页显示</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nn>---</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>title</span><span class=p>:</span><span class=w> </span><span class=l>新的主题</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>date</span><span class=p>:</span><span class=w> </span><span class=ld>2022-06-19 11:10:00 +0800</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>categories</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>折腾]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>hiddenInHomeList</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nn>---</span><span class=w>
</span></span></span></code></pre></div><p>但是不在主页显示后读者就不容易找到，此时我们在 config.yaml 中额外加个 menu 即可：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>menu</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>main</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=l>...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>identifier</span><span class=p>:</span><span class=w> </span><span class=l>categories</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>折腾</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>/categories/折腾</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>weight</span><span class=p>:</span><span class=w> </span><span class=m>20</span><span class=w>
</span></span></span></code></pre></div><p>接着再寻找到 <code>layouts/_default/single.html</code> 中的 <code>post-meta</code> 类，在里面加入代码来让文章的元信息栏（显示时间，有多少词的地方）显示分类</p><p><details><summary markdown=span>修改 single.html 加入分类信息</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;post-meta&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      {{- partial &#34;post_meta.html&#34; . -}}
</span></span><span class=line><span class=cl>      {{- partial &#34;translation_list.html&#34; . -}}
</span></span><span class=line><span class=cl>      {{- partial &#34;edit_post.html&#34; . -}}
</span></span><span class=line><span class=cl>      {{- partial &#34;post_canonical.html&#34; . -}}
</span></span><span class=line><span class=cl>      <span class=c>&lt;!-- 在元数据中显示分类信息 --&gt;</span>
</span></span><span class=line><span class=cl>      {{- $categories := .Language.Params.Taxonomies.category | default &#34;categories&#34;}}
</span></span><span class=line><span class=cl>      <span class=c>&lt;!-- 统计分类个数 --&gt;</span>
</span></span><span class=line><span class=cl>      {{- $cnt := 0 }}
</span></span><span class=line><span class=cl>      {{- range ($.GetTerms $categories) }}
</span></span><span class=line><span class=cl>        {{- $cnt = add $cnt 1 }}
</span></span><span class=line><span class=cl>      {{- end }}
</span></span><span class=line><span class=cl>      <span class=c>&lt;!-- 只有文章有分类信息时才显示 --&gt;</span>
</span></span><span class=line><span class=cl>      {{- if gt $cnt 0 }}
</span></span><span class=line><span class=cl>        {{- $i := 0 }}
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;meta-item&#34;</span><span class=p>&gt;</span><span class=err>&amp;</span>nbsp·<span class=err>&amp;</span>nbsp
</span></span><span class=line><span class=cl>            {{- range ($.GetTerms $categories) }}
</span></span><span class=line><span class=cl>                <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&#34;{{ .Permalink }}&#34;</span><span class=p>&gt;</span>{{ .LinkTitle }}<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                {{ $i = add $i 1 }}
</span></span><span class=line><span class=cl>                <span class=c>&lt;!-- 不是最后一个类别时，添加逗号分割类别 --&gt;</span>
</span></span><span class=line><span class=cl>                {{- if lt $i $cnt}}
</span></span><span class=line><span class=cl>                    <span class=p>&lt;</span><span class=nt>span</span><span class=p>&gt;</span>,<span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>                {{- end }}
</span></span><span class=line><span class=cl>            {{- end }}
</span></span><span class=line><span class=cl>        <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      {{- end }}
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    {{- end }}
</span></span></code></pre></div></details></p><h2 id=shortcodes-大赏>Shortcodes 大赏<a hidden class=anchor aria-hidden=true href=#shortcodes-大赏>#</a></h2><p>这里分享一些我比较常用的shortcode，也欢迎评论区分享你觉得有趣的</p><h3 id=旋转的友链>旋转的友链<a hidden class=anchor aria-hidden=true href=#旋转的友链>#</a></h3><a target=_blank href=http://www.aaronsw.com/weblog/ title="Aaron Swartz" class=friendurl><div class=frienddiv><div class=frienddivleft><img class=myfriend src=https://s2.loli.net/2024/11/08/eZqIH7JXYs3iSp8.png></div><div class=frienddivright><div class=friendname>Aaron Swartz</div><div class=friendinfo>用以缅怀自由斗士 Aaron</div></div></div></a><p>当鼠标悬浮至友链所对应的头像时，头像便会开始进行旋转，这个还挺有趣的，首先在 assets/css/extended/friends.css 中加入以下内容：
<span class=sidenote-number><small class=sidenote>借鉴了 <a href=https://github.com/xyming108/sulv-hugo-papermod/blob/main/layouts/shortcodes/friend.html>sulvblog</a></small></span></p><p><details><summary markdown=span>旋转友链的 CSS 设置</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>.</span><span class=nc>friendurl</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>text-decoration</span><span class=p>:</span> <span class=kc>none</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>color</span><span class=p>:</span> <span class=kc>black</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>box-shadow</span><span class=p>:</span> <span class=kc>none</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>myfriend</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>width</span><span class=p>:</span> <span class=mi>56</span><span class=kt>px</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>height</span><span class=p>:</span> <span class=mi>56</span><span class=kt>px</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>border-radius</span><span class=p>:</span> <span class=mi>50</span><span class=kt>%</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>padding</span><span class=p>:</span> <span class=mi>2</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>margin-top</span><span class=p>:</span> <span class=mi>20</span><span class=kt>px</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>margin-left</span><span class=p>:</span> <span class=mi>14</span><span class=kt>px</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>background-color</span><span class=p>:</span> <span class=mh>#fff</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>frienddiv</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>overflow</span><span class=p>:</span> <span class=kc>auto</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>height</span><span class=p>:</span> <span class=mi>100</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>width</span><span class=p>:</span> <span class=mi>49</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>display</span><span class=p>:</span> <span class=kc>inline-block</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>border-radius</span><span class=p>:</span> <span class=mi>5</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>background</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kp>-webkit-</span><span class=k>transition</span><span class=p>:</span> <span class=kc>all</span> <span class=kc>ease-out</span> <span class=mf>0.3</span><span class=kt>s</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kp>-moz-</span><span class=k>transition</span><span class=p>:</span> <span class=kc>all</span> <span class=kc>ease-out</span> <span class=mf>0.3</span><span class=kt>s</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kp>-o-</span><span class=k>transition</span><span class=p>:</span> <span class=kc>all</span> <span class=kc>ease-out</span> <span class=mf>0.3</span><span class=kt>s</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>transition</span><span class=p>:</span> <span class=kc>all</span> <span class=kc>ease-out</span> <span class=mf>0.3</span><span class=kt>s</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>dark</span> <span class=p>.</span><span class=nc>frienddiv</span><span class=p>:</span><span class=nd>hover</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>background</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>code</span><span class=o>-</span><span class=n>bg</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>frienddiv</span><span class=p>:</span><span class=nd>hover</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>background</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>theme</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>transition</span><span class=p>:</span> <span class=k>transform</span> <span class=mi>1</span><span class=kt>s</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>webkit-transform</span><span class=p>:</span> <span class=nb>scale</span><span class=p>(</span><span class=mf>1.1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kp>-moz-</span><span class=k>transform</span><span class=p>:</span> <span class=nb>scale</span><span class=p>(</span><span class=mf>1.2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kp>-ms-</span><span class=k>transform</span><span class=p>:</span> <span class=nb>scale</span><span class=p>(</span><span class=mf>1.2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kp>-o-</span><span class=k>transform</span><span class=p>:</span> <span class=nb>scale</span><span class=p>(</span><span class=mf>1.2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=k>transform</span><span class=p>:</span> <span class=nb>scale</span><span class=p>(</span><span class=mf>1.1</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>frienddiv</span><span class=p>:</span><span class=nd>hover</span> <span class=p>.</span><span class=nc>frienddivleft</span> <span class=nt>img</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>transition</span><span class=p>:</span> <span class=mf>0.9</span><span class=kt>s</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kp>-webkit-</span><span class=k>transition</span><span class=p>:</span> <span class=mf>0.9</span><span class=kt>s</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kp>-moz-</span><span class=k>transition</span><span class=p>:</span> <span class=mf>0.9</span><span class=kt>s</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kp>-o-</span><span class=k>transition</span><span class=p>:</span> <span class=mf>0.9</span><span class=kt>s</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kp>-ms-</span><span class=k>transition</span><span class=p>:</span> <span class=mf>0.9</span><span class=kt>s</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>transform</span><span class=p>:</span> <span class=nb>rotate</span><span class=p>(</span><span class=mi>360</span><span class=kt>deg</span><span class=p>)</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kp>-webkit-</span><span class=k>transform</span><span class=p>:</span> <span class=nb>rotate</span><span class=p>(</span><span class=mi>360</span><span class=kt>deg</span><span class=p>)</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kp>-moz-</span><span class=k>transform</span><span class=p>:</span> <span class=nb>rotate</span><span class=p>(</span><span class=mi>360</span><span class=kt>deg</span><span class=p>)</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kp>-o-</span><span class=k>transform</span><span class=p>:</span> <span class=nb>rotate</span><span class=p>(</span><span class=mi>360</span><span class=kt>deg</span><span class=p>)</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kp>-ms-</span><span class=k>transform</span><span class=p>:</span> <span class=nb>rotate</span><span class=p>(</span><span class=mi>360</span><span class=kt>deg</span><span class=p>)</span> <span class=cp>!important</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>frienddivleft</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>width</span><span class=p>:</span> <span class=mi>92</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>float</span><span class=p>:</span> <span class=kc>left</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>margin-right</span><span class=p>:</span> <span class=mi>-5</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>frienddivright</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>margin-top</span><span class=p>:</span> <span class=mi>18</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>margin-right</span><span class=p>:</span> <span class=mi>18</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>friendname</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>text-overflow</span><span class=p>:</span> <span class=kc>ellipsis</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>font-size</span><span class=p>:</span> <span class=mi>100</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>margin-bottom</span><span class=p>:</span> <span class=mi>5</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>color</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>primary</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>.</span><span class=nc>friendinfo</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>text-overflow</span><span class=p>:</span> <span class=kc>ellipsis</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>font-size</span><span class=p>:</span> <span class=mi>70</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>color</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>primary</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>@</span><span class=k>media</span> <span class=nt>screen</span> <span class=nt>and</span> <span class=o>(</span><span class=nt>max-width</span><span class=o>:</span> <span class=nt>600px</span><span class=o>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nc>friendinfo</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>display</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nc>frienddivleft</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>width</span><span class=p>:</span> <span class=mi>84</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>margin</span><span class=p>:</span> <span class=kc>auto</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nc>frienddivright</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>height</span><span class=p>:</span> <span class=mi>100</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>margin</span><span class=p>:</span> <span class=kc>auto</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>display</span><span class=p>:</span> <span class=kc>flex</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>align-items</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>justify-content</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nc>friendname</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>font-size</span><span class=p>:</span> <span class=mi>18</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></details></p><p>接着在 layouts/shortcodes/friend.html 中加入以下内容：</p><p><details><summary markdown=span>friend.html 内容</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=p>{{</span><span class=o>-</span> <span class=k>if</span> <span class=p>.</span><span class=nx>IsNamedParams</span> <span class=o>-</span><span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nx>a</span> <span class=nx>target</span><span class=p>=</span><span class=s>&#34;_blank&#34;</span> <span class=nx>href</span><span class=p>={{</span> <span class=p>.</span><span class=nx>Get</span> <span class=s>&#34;url&#34;</span> <span class=p>}}</span> <span class=nx>title</span><span class=p>={{</span> <span class=p>.</span><span class=nx>Get</span> <span class=s>&#34;name&#34;</span> <span class=p>}}</span> <span class=nx>class</span><span class=p>=</span><span class=s>&#34;friendurl&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=nx>div</span> <span class=nx>class</span><span class=p>=</span><span class=s>&#34;frienddiv&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nx>div</span> <span class=nx>class</span><span class=p>=</span><span class=s>&#34;frienddivleft&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nx>img</span> <span class=nx>class</span><span class=p>=</span><span class=s>&#34;myfriend&#34;</span> <span class=nx>src</span><span class=p>={{</span> <span class=p>.</span><span class=nx>Get</span> <span class=s>&#34;logo&#34;</span> <span class=p>}}</span> <span class=o>/</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=o>/</span><span class=nx>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nx>div</span> <span class=nx>class</span><span class=p>=</span><span class=s>&#34;frienddivright&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nx>div</span> <span class=nx>class</span><span class=p>=</span><span class=s>&#34;friendname&#34;</span><span class=p>&gt;{{</span><span class=o>-</span> <span class=p>.</span><span class=nx>Get</span> <span class=s>&#34;name&#34;</span> <span class=o>-</span><span class=p>}}&lt;</span><span class=o>/</span><span class=nx>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nx>div</span> <span class=nx>class</span><span class=p>=</span><span class=s>&#34;friendinfo&#34;</span><span class=p>&gt;{{</span><span class=o>-</span> <span class=p>.</span><span class=nx>Get</span> <span class=s>&#34;word&#34;</span> <span class=o>-</span><span class=p>}}&lt;</span><span class=o>/</span><span class=nx>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=o>/</span><span class=nx>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>&lt;</span><span class=o>/</span><span class=nx>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=o>/</span><span class=nx>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=o>-</span> <span class=nx>end</span> <span class=p>}}</span>
</span></span></code></pre></div></details></p><h3 id=blockquote>Blockquote<a hidden class=anchor aria-hidden=true href=#blockquote>#</a></h3><blockquote class=quote><p>Basically, I’m not interested in doing research and I never have been… I’m interested in understanding, which is quite a different thing. And often to understand something you have to work it out yourself because no one else has done it. — David Blackwell</p></blockquote><p>这个主题原来的 blockquote 较为丑，在 layouts/shortcodes/quote.html 加入以下内容
<span class=sidenote-number><small class=sidenote>借鉴了 <a href=https://guanqr.com/tech/website/hugo-shortcodes-customization/#quote>Guan Qirui</a></small></span></p><p><details><summary markdown=span>Blockquote html 设置</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>blockquote</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;quote{{ range .Params }} {{ . }}{{ end }}&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    {{- `$content := .Inner | markdownify -}}$`
</span></span><span class=line><span class=cl>    {{- if not (strings.HasPrefix `$content &#34;<span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>&#34;) }}$`
</span></span><span class=line><span class=cl>        {{ printf `<span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>%s<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>` `$content | safeHTML }}$`
</span></span><span class=line><span class=cl>    {{- else }}
</span></span><span class=line><span class=cl>        {{- `$content }}$`
</span></span><span class=line><span class=cl>    {{- end -}}
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>blockquote</span><span class=p>&gt;</span>
</span></span></code></pre></div></details></p><p>然后创建 assets/css/extended/quote.css 并加入以下内容</p><p><details><summary markdown=span>Blockquote 的 css 配置</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=nt>blockquote</span><span class=p>.</span><span class=nc>quote</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>position</span><span class=p>:</span> <span class=kc>relative</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>margin</span><span class=p>:</span> <span class=mi>1</span><span class=kt>em</span> <span class=kc>auto</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>padding-left</span><span class=p>:</span> <span class=mi>3</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>border</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>blockquote</span><span class=p>.</span><span class=nc>quote</span><span class=p>::</span><span class=nd>before</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>position</span><span class=p>:</span> <span class=kc>absolute</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>left</span><span class=p>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>content</span><span class=p>:</span> <span class=s2>&#34;“&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>font-size</span><span class=p>:</span> <span class=mi>3</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>font-weight</span><span class=p>:</span> <span class=kc>bold</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>line-height</span><span class=p>:</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>blockquote</span><span class=p>.</span><span class=nc>quote-copyright</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>position</span><span class=p>:</span> <span class=kc>relative</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>margin</span><span class=p>:</span> <span class=mi>2</span><span class=kt>em</span> <span class=kc>auto</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>padding-left</span><span class=p>:</span> <span class=mi>3</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>border</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>background-color</span><span class=p>:</span> <span class=kc>aliceblue</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nt>blockquote</span><span class=p>.</span><span class=nc>quote-copyright</span><span class=p>::</span><span class=nd>before</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>position</span><span class=p>:</span> <span class=kc>absolute</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>left</span><span class=p>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>content</span><span class=p>:</span> <span class=s2>&#34;“&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>font-size</span><span class=p>:</span> <span class=mi>3</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>font-weight</span><span class=p>:</span> <span class=kc>bold</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>line-height</span><span class=p>:</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></details></p><h3 id=github-小卡片>Github 小卡片<a hidden class=anchor aria-hidden=true href=#github-小卡片>#</a></h3><p>Github 仓库小卡片对我来说还是比较重要的，因为我一般代码都会进行开源，如果可以用一种卡片的方式提醒读者开源代码所在处，就省了读者去查找的功夫了，首先在 assets/css/extended/github.css 中填入以下内容：</p><p><details><summary markdown=span>Github 卡片相关 CSS 设置</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>.</span><span class=nc>github</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>border</span><span class=p>:</span> <span class=mi>0</span><span class=kt>px</span> <span class=kc>solid</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>border-radius</span><span class=p>:</span> <span class=mi>5</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>width</span><span class=p>:</span> <span class=mi>95</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>margin-bottom</span><span class=p>:</span> <span class=mi>1</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>margin-top</span><span class=p>:</span> <span class=mi>1</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>padding</span><span class=p>:</span> <span class=mi>1</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>background-color</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=n>code</span><span class=o>-</span><span class=n>bg</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=err>.github_bar</span> <span class=err>{</span>
</span></span><span class=line><span class=cl>    <span class=k>margin-top</span><span class=p>:</span> <span class=mf>-0.6</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>margin-left</span><span class=p>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nc>github_name</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>font-weight</span><span class=p>:</span> <span class=kc>bold</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>text-decoration</span><span class=p>:</span> <span class=kc>none</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>font-size</span><span class=p>:</span> <span class=mi>24</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>position</span><span class=p>:</span> <span class=kc>relative</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>top</span><span class=p>:</span> <span class=mf>-0.6</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>left</span><span class=p>:</span> <span class=mf>0.3</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nc>github_description</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>margin-top</span><span class=p>:</span> <span class=mf>-0.3</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>margin-bottom</span><span class=p>:</span> <span class=mi>1</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>color</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=kc>color</span><span class=o>-</span><span class=n>contrast</span><span class=o>-</span><span class=kc>high</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>text-align</span><span class=p>:</span> <span class=kc>justify</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>font-size</span><span class=p>:</span> <span class=mi>90</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>width</span><span class=p>:</span> <span class=mi>95</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>transition</span><span class=p>:</span> <span class=kc>all</span> <span class=mf>0.5</span><span class=kt>s</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nc>github_language</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>margin-top</span><span class=p>:</span> <span class=mf>-0.6</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nc>github_language_name</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>color</span><span class=p>:</span> <span class=nf>var</span><span class=p>(</span><span class=o>--</span><span class=kc>color</span><span class=o>-</span><span class=n>contrast</span><span class=o>-</span><span class=kc>high</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>font-size</span><span class=p>:</span> <span class=mi>90</span><span class=kt>%</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>margin-left</span><span class=p>:</span> <span class=mf>0.5</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>transition</span><span class=p>:</span> <span class=kc>all</span> <span class=mf>0.5</span><span class=kt>s</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=err>}</span>
</span></span></code></pre></div></details></p><p>接着，在 layouts/shortcodes/github.html 中加入以下内容：</p><p><details><summary markdown=span>github.html 内容</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;github&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;github_bar&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        {{ replace `$.Site.Data.SVG.repository &#34;icon&#34; &#34;icon github-icon&#34; | safeHTML }}$`
</span></span><span class=line><span class=cl>        <span class=p>&lt;</span><span class=nt>a</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;github_name&#34;</span> <span class=na>href</span><span class=o>=</span><span class=s>{{</span> <span class=err>.</span><span class=na>Get</span> <span class=err>&#34;</span><span class=na>link</span><span class=err>&#34;</span> <span class=err>}}</span> <span class=na>target</span><span class=o>=</span><span class=s>&#34;_blank&#34;</span><span class=p>&gt;</span>{{ .Get &#34;name&#34; }}<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;github_description&#34;</span><span class=p>&gt;</span>{{ .Get &#34;description&#34; }}<span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span> <span class=na>class</span><span class=o>=</span><span class=s>&#34;github_language&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        {{ .Get &#34;language&#34; }}
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span></code></pre></div></details></p><p>最后在 data 中添加 SVG.toml 并加入以下内容</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=nx>repository</span> <span class=p>=</span> <span class=s1>&#39;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; width=&#34;50&#34; height=&#34;50&#34; viewBox=&#34;0 0 50 50&#34;&gt;&lt;path d=&#34;M17.791,46.836C18.502,46.53,19,45.823,19,45v-5.4c0-0.197,0.016-0.402,0.041-0.61C19.027,38.994,19.014,38.997,19,39 c0,0-3,0-3.6,0c-1.5,0-2.8-0.6-3.4-1.8c-0.7-1.3-1-3.5-2.8-4.7C8.9,32.3,9.1,32,9.7,32c0.6,0.1,1.9,0.9,2.7,2c0.9,1.1,1.8,2,3.4,2 c2.487,0,3.82-0.125,4.622-0.555C21.356,34.056,22.649,33,24,33v-0.025c-5.668-0.182-9.289-2.066-10.975-4.975 c-3.665,0.042-6.856,0.405-8.677,0.707c-0.058-0.327-0.108-0.656-0.151-0.987c1.797-0.296,4.843-0.647,8.345-0.714 c-0.112-0.276-0.209-0.559-0.291-0.849c-3.511-0.178-6.541-0.039-8.187,0.097c-0.02-0.332-0.047-0.663-0.051-0.999 c1.649-0.135,4.597-0.27,8.018-0.111c-0.079-0.5-0.13-1.011-0.13-1.543c0-1.7,0.6-3.5,1.7-5c-0.5-1.7-1.2-5.3,0.2-6.6 c2.7,0,4.6,1.3,5.5,2.1C21,13.4,22.9,13,25,13s4,0.4,5.6,1.1c0.9-0.8,2.8-2.1,5.5-2.1c1.5,1.4,0.7,5,0.2,6.6c1.1,1.5,1.7,3.2,1.6,5 c0,0.484-0.045,0.951-0.11,1.409c3.499-0.172,6.527-0.034,8.204,0.102c-0.002,0.337-0.033,0.666-0.051,0.999 c-1.671-0.138-4.775-0.28-8.359-0.089c-0.089,0.336-0.197,0.663-0.325,0.98c3.546,0.046,6.665,0.389,8.548,0.689 c-0.043,0.332-0.093,0.661-0.151,0.987c-1.912-0.306-5.171-0.664-8.879-0.682C35.112,30.873,31.557,32.75,26,32.969V33 c2.6,0,5,3.9,5,6.6V45c0,0.823,0.498,1.53,1.209,1.836C41.37,43.804,48,35.164,48,25C48,12.318,37.683,2,25,2S2,12.318,2,25 C2,35.164,8.63,43.804,17.791,46.836z&#34;&gt;&lt;/path&gt;&lt;/svg&gt;&#39;</span>
</span></span></code></pre></div><h3 id=各种-notice>各种 notice<a hidden class=anchor aria-hidden=true href=#各种-notice>#</a></h3><p><div class="notice notice-info"><div class=notice-title><svg xmlns="http://www.w3.org/2000/svg" class="icon notice-icon" viewBox="0 0 512 512"><path d="M256 8a248 248 0 100 496 248 248 0 000-496zm0 110a42 42 0 110 84 42 42 0 010-84zm56 254c0 7-5 12-12 12h-88c-7 0-12-5-12-12v-24c0-7 5-12 12-12h12v-64h-12c-7 0-12-5-12-12v-24c0-7 5-12 12-12h64c7 0 12 5 12 12v1e2h12c7 0 12 5 12 12v24z"/></svg></div><p>一生疏狂尽余欢，半剖肝胆入剑寒。 剑至高危如蜀道，生逢穷途行路难。</p></div><div class="notice notice-warning"><div class=notice-title><svg xmlns="http://www.w3.org/2000/svg" class="icon notice-icon" viewBox="0 0 576 512"><path d="M570 440c18 32-5 72-42 72H48c-37 0-60-40-42-72L246 24c19-32 65-32 84 0l240 416zm-282-86a46 46 0 100 92 46 46 0 000-92zm-44-165 8 136c0 6 5 11 12 11h48c7 0 12-5 12-11l8-136c0-7-5-13-12-13h-64c-7 0-12 6-12 13z"/></svg></div><p>一生疏狂尽余欢，半剖肝胆入剑寒。 剑至高危如蜀道，生逢穷途行路难。</p></div><div class="notice notice-tip"><div class=notice-title><svg xmlns="http://www.w3.org/2000/svg" class="icon notice-icon" viewBox="0 0 512 512"><path d="M504 256A248 248 0 118 256a248 248 0 01496 0zM227 387l184-184c7-6 7-16 0-22l-22-23c-7-6-17-6-23 0L216 308l-70-70c-6-6-16-6-23 0l-22 23c-7 6-7 16 0 22l104 104c6 7 16 7 22 0z"/></svg></div><p>一生疏狂尽余欢，半剖肝胆入剑寒。 剑至高危如蜀道，生逢穷途行路难。</p></div><div class="notice notice-note"><div class=notice-title><svg xmlns="http://www.w3.org/2000/svg" class="icon notice-icon" viewBox="0 0 512 512"><path d="M504 256A248 248 0 118 256a248 248 0 01496 0zm-248 50a46 46 0 100 92 46 46 0 000-92zm-44-165 8 136c0 6 5 11 12 11h48c7 0 12-5 12-11l8-136c0-7-5-13-12-13h-64c-7 0-12 6-12 13z"/></svg></div><p>一生疏狂尽余欢，半剖肝胆入剑寒。 剑至高危如蜀道，生逢穷途行路难。</p></div></p><p>在 layouts/shortcodes 中创建 notice.html，然后复制以下内容：
<span class=sidenote-number><small class=sidenote>借鉴了 <a href=https://github.com/martignoni/hugo-notice>Hugo-notice</a></small></span></p><p><details><summary markdown=span>notice.html 内容</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=p>{{</span><span class=o>-</span> <span class=s>`$noticeType := .Get 0 -}}$`</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=o>-</span> <span class=s>`$raw := (markdownify .Inner | chomp) -}}$`</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{{</span><span class=o>-</span> <span class=s>`$block := findRE &#34;(?is)^&lt;(?:address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h(?:1|2|3|4|5|6)|header|hgroup|hr|li|main|nav|noscript|ol|output|p|pre|section|table|tfoot|ul|video)\\b&#34; $`</span><span class=nx>raw</span> <span class=mi>1</span> <span class=o>-</span><span class=p>}}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>{{</span> <span class=s>`$icon := (replace (index site.Data.SVG $`</span><span class=nx>noticeType</span><span class=p>)</span> <span class=s>&#34;icon&#34;</span> <span class=s>&#34;icon notice-icon&#34;</span><span class=p>)</span> <span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nx>div</span> <span class=nx>class</span><span class=p>=</span><span class=s>&#34;notice {{ `$noticeType }}&#34;</span> <span class=p>{{</span> <span class=k>if</span> <span class=nx>len</span> <span class=p>.</span><span class=nx>Params</span> <span class=p>|</span> <span class=nx>eq</span> <span class=mi>2</span> <span class=p>}}</span> <span class=nx>id</span><span class=p>=</span><span class=s>&#34;{{ .Get 1 }}&#34;</span> <span class=p>{{</span> <span class=nx>end</span> <span class=p>}}&gt;</span><span class=err>$</span><span class=s>`
</span></span></span><span class=line><span class=cl><span class=s>    &lt;div class=&#34;notice-title&#34;&gt;</span><span class=cp>{{</span><span class=w> </span><span class=s>`</span><span class=err>$</span><span class=nx>icon</span> <span class=p>|</span> <span class=nx>safeHTML</span> <span class=p>}}&lt;</span><span class=o>/</span><span class=nx>div</span><span class=p>&gt;</span><span class=err>$</span><span class=s>`
</span></span></span><span class=line><span class=cl><span class=s>    </span><span class=cp>{{-</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=s>`</span><span class=err>$</span><span class=nf>block</span> <span class=p>(</span><span class=nx>not</span> <span class=err>$</span><span class=s>`raw) }}</span><span class=cp>{{</span><span class=w> </span><span class=s>`</span><span class=err>$</span><span class=nx>raw</span> <span class=p>}}{{</span> <span class=k>else</span> <span class=p>}}&lt;</span><span class=nx>p</span><span class=p>&gt;{{</span> <span class=err>$`</span><span class=nx>raw</span> <span class=p>}}&lt;</span><span class=o>/</span><span class=nx>p</span><span class=p>&gt;{{</span> <span class=nx>end</span> <span class=o>-</span><span class=p>}}</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=o>/</span><span class=nx>div</span><span class=p>&gt;</span>
</span></span></code></pre></div></details></p><p>接着在 assets/extended 中创建 notice.css 并填入以下内容：</p><p><details><summary markdown=span>notice.css 内容</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-css data-lang=css><span class=line><span class=cl><span class=p>.</span><span class=nc>notice</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>display</span><span class=p>:</span> <span class=kc>flex</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>align-items</span><span class=p>:</span> <span class=kc>center</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>position</span><span class=p>:</span> <span class=kc>relative</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>padding</span><span class=p>:</span> <span class=mf>0.6</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>margin-bottom</span><span class=p>:</span> <span class=mi>1</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>border-radius</span><span class=p>:</span> <span class=mi>4</span><span class=kt>px</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>p</span><span class=p>:</span><span class=kc>last</span><span class=o>-</span><span class=n>child</span> <span class=err>{</span>
</span></span><span class=line><span class=cl>    <span class=k>margin-bottom</span><span class=o>:</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>.</span><span class=nc>notice-title</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>margin-right</span><span class=p>:</span> <span class=mf>0.5</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>margin-top</span><span class=p>:</span> <span class=mf>0.5</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=err>.notice-icon</span> <span class=err>{</span>
</span></span><span class=line><span class=cl>      <span class=k>width</span><span class=p>:</span> <span class=mf>1.2</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>height</span><span class=p>:</span> <span class=mf>1.2</span><span class=kt>em</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=err>}</span>
</span></span><span class=line><span class=cl>  <span class=o>&amp;</span><span class=p>.</span><span class=nc>notice-warning</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>background</span><span class=p>:</span> <span class=nb>hsla</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>65</span><span class=kt>%</span><span class=p>,</span> <span class=mi>65</span><span class=kt>%</span><span class=p>,</span> <span class=mf>0.15</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=err>.notice-title</span> <span class=err>{</span>
</span></span><span class=line><span class=cl>      <span class=k>color</span><span class=p>:</span> <span class=nb>hsl</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>65</span><span class=kt>%</span><span class=p>,</span> <span class=mi>65</span><span class=kt>%</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=err>}</span>
</span></span><span class=line><span class=cl>  <span class=o>&amp;</span><span class=p>.</span><span class=nc>notice-info</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>background</span><span class=p>:</span> <span class=nb>hsla</span><span class=p>(</span><span class=mi>30</span><span class=p>,</span> <span class=mi>80</span><span class=kt>%</span><span class=p>,</span> <span class=mi>70</span><span class=kt>%</span><span class=p>,</span> <span class=mf>0.15</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=err>.notice-title</span> <span class=err>{</span>
</span></span><span class=line><span class=cl>      <span class=k>color</span><span class=p>:</span> <span class=nb>hsl</span><span class=p>(</span><span class=mi>30</span><span class=p>,</span> <span class=mi>80</span><span class=kt>%</span><span class=p>,</span> <span class=mi>70</span><span class=kt>%</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=err>}</span>
</span></span><span class=line><span class=cl>  <span class=o>&amp;</span><span class=p>.</span><span class=nc>notice-note</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>background</span><span class=p>:</span> <span class=nb>hsla</span><span class=p>(</span><span class=mi>200</span><span class=p>,</span> <span class=mi>65</span><span class=kt>%</span><span class=p>,</span> <span class=mi>65</span><span class=kt>%</span><span class=p>,</span> <span class=mf>0.15</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=err>.notice-title</span> <span class=err>{</span>
</span></span><span class=line><span class=cl>      <span class=k>color</span><span class=p>:</span> <span class=nb>hsl</span><span class=p>(</span><span class=mi>200</span><span class=p>,</span> <span class=mi>65</span><span class=kt>%</span><span class=p>,</span> <span class=mi>65</span><span class=kt>%</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=err>}</span>
</span></span><span class=line><span class=cl>  <span class=o>&amp;</span><span class=p>.</span><span class=nc>notice-tip</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>background</span><span class=p>:</span> <span class=nb>hsla</span><span class=p>(</span><span class=mi>140</span><span class=p>,</span> <span class=mi>65</span><span class=kt>%</span><span class=p>,</span> <span class=mi>65</span><span class=kt>%</span><span class=p>,</span> <span class=mf>0.15</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=err>.notice-title</span> <span class=err>{</span>
</span></span><span class=line><span class=cl>      <span class=k>color</span><span class=p>:</span> <span class=nb>hsl</span><span class=p>(</span><span class=mi>140</span><span class=p>,</span> <span class=mi>65</span><span class=kt>%</span><span class=p>,</span> <span class=mi>65</span><span class=kt>%</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=err>}</span>
</span></span><span class=line><span class=cl><span class=err>}</span>
</span></span></code></pre></div></details></p><p>最后在 data/SVG.toml 中加入以下内容：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=nx>notice-warning</span> <span class=p>=</span> <span class=s1>&#39;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; class=&#34;icon&#34; viewBox=&#34;0 0 576 512&#34;&gt;&lt;path d=&#34;M570 440c18 32-5 72-42 72H48c-37 0-60-40-42-72L246 24c19-32 65-32 84 0l240 416zm-282-86a46 46 0 100 92 46 46 0 000-92zm-44-165l8 136c0 6 5 11 12 11h48c7 0 12-5 12-11l8-136c0-7-5-13-12-13h-64c-7 0-12 6-12 13z&#34;/&gt;&lt;/svg&gt;&#39;</span>
</span></span><span class=line><span class=cl><span class=nx>notice-info</span> <span class=p>=</span> <span class=s1>&#39;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; class=&#34;icon&#34; viewBox=&#34;0 0 512 512&#34;&gt;&lt;path d=&#34;M256 8a248 248 0 100 496 248 248 0 000-496zm0 110a42 42 0 110 84 42 42 0 010-84zm56 254c0 7-5 12-12 12h-88c-7 0-12-5-12-12v-24c0-7 5-12 12-12h12v-64h-12c-7 0-12-5-12-12v-24c0-7 5-12 12-12h64c7 0 12 5 12 12v100h12c7 0 12 5 12 12v24z&#34;/&gt;&lt;/svg&gt;&#39;</span>
</span></span><span class=line><span class=cl><span class=nx>notice-note</span> <span class=p>=</span> <span class=s1>&#39;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; class=&#34;icon&#34; viewBox=&#34;0 0 512 512&#34;&gt;&lt;path d=&#34;M504 256a248 248 0 11-496 0 248 248 0 01496 0zm-248 50a46 46 0 100 92 46 46 0 000-92zm-44-165l8 136c0 6 5 11 12 11h48c7 0 12-5 12-11l8-136c0-7-5-13-12-13h-64c-7 0-12 6-12 13z&#34;/&gt;&lt;/svg&gt;&#39;</span>
</span></span><span class=line><span class=cl><span class=nx>notice-tip</span> <span class=p>=</span> <span class=s1>&#39;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; class=&#34;icon&#34; viewBox=&#34;0 0 512 512&#34;&gt;&lt;path d=&#34;M504 256a248 248 0 11-496 0 248 248 0 01496 0zM227 387l184-184c7-6 7-16 0-22l-22-23c-7-6-17-6-23 0L216 308l-70-70c-6-6-16-6-23 0l-22 23c-7 6-7 16 0 22l104 104c6 7 16 7 22 0z&#34;/&gt;&lt;/svg&gt;&#39;</span>
</span></span></code></pre></div></div><div style="margin-top:2em;padding:1em;border:0 solid;border-radius:10px;background-color:var(--code-bg)"><h3>🐱如果您想要引用，请考虑如下格式：</h3><div style=padding-top:.5em>台运鹏. (Dec. 17, 2024). 《Hugo PaperMod 主题精装修》[Blog
post]. Retrieved from http://yunpengtai.top/posts/hugo-journey/</div><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>@online{blog-2f28816a8a81cf6de8769f418f6b721e,
</span></span><span class=line><span class=cl>        title={Hugo PaperMod 主题精装修},
</span></span><span class=line><span class=cl>        author={Yunpeng Tai},
</span></span><span class=line><span class=cl>        year={2024},
</span></span><span class=line><span class=cl>        month={Dec},
</span></span><span class=line><span class=cl>        note={http://yunpengtai.top/posts/hugo-journey/},
</span></span><span class=line><span class=cl>}
</span></span></code></pre></div><div style=padding-bottom:.4em>自由转载-非商用-非衍生-保持署名（<a href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank>CC BY-NC-SA 4.0）</a></div></div><footer class=post-footer><ul class=post-tags><li><a href=http://yunpengtai.top/tags/%E7%BD%91%E7%AB%99/>网站</a></li><li><a href=http://yunpengtai.top/tags/%E6%8A%98%E8%85%BE/>折腾</a></li><li><a href=http://yunpengtai.top/tags/%E4%B8%BB%E9%A2%98/>主题</a></li><li><a href=http://yunpengtai.top/tags/%E8%87%AA%E5%AE%9A%E4%B9%89/>自定义</a></li></ul><nav class=paginav><a class=prev href=http://yunpengtai.top/posts/know-mihomo/><span class=title>« Prev</span><br><span>「网络代理」这件小事</span></a>
<a class=next href=http://yunpengtai.top/posts/better-prompt/><span class=title>Next »</span><br><span>How to prompt LLM better?</span></a></nav></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css integrity=sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js integrity=sha384-G0zcxDFp5LWZtDuRMnBkk3EphCK1lhEf4UEyEM693ka574TZGwo4IWwS6QLzM/2t crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/artalk@2.8.6/dist/Artalk.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/@artalk/plugin-katex@0.2.4/dist/artalk-plugin-katex.min.js></script><div id=Comments></div><script>const artalk=Artalk.init({el:"#Comments",pageKey:"",pageTitle:"Hugo PaperMod 主题精装修",server:"https://comment.yunpengtai.top",site:"Tai's Blog",darkMode:"auto",versionCheck:!1});document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?artalk.setDarkMode(!1):artalk.setDarkMode(!0)})</script><script src=https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js></script>
<script>const elementCode=".mermaid",loadMermaid=function(e){mermaid.initialize({theme:e}),mermaid.init({theme:e,themeVariables:{fontFamily:["SFProText-Regular","LXGWWenKaiScreenR"]}},document.querySelectorAll(elementCode))},saveOriginalData=function(){return new Promise((e,t)=>{try{var n=document.querySelectorAll(elementCode),s=n.length;n.forEach(t=>{t.setAttribute("data-original-code",t.innerHTML),s--,s==0&&e()})}catch(e){t(e)}})},resetProcessed=function(){return new Promise((e,t)=>{try{var n=document.querySelectorAll(elementCode),s=n.length;n.forEach(t=>{t.getAttribute("data-original-code")!=null&&(t.removeAttribute("data-processed"),t.innerHTML=t.getAttribute("data-original-code")),s--,s==0&&e()})}catch(e){t(e)}})};saveOriginalData().catch(console.error);let isdark=document.body.className.includes("dark");isdark?resetProcessed().then(loadMermaid("dark")).catch(console.error):resetProcessed().then(loadMermaid("neutral")).catch(console.error),document.getElementById("theme-toggle").addEventListener("click",()=>{resetProcessed(),document.body.className.includes("dark")?loadMermaid("neutral"):loadMermaid("dark").catch(console.error)})</script></article></main><footer class=footer><span>&copy; 2025 <a href=http://yunpengtai.top>Tai's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/sherlcok314159/MyPaperMod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>(function(e,t){var s=document,o="script",n=s.createElement(o),i=s.getElementsByTagName(o)[0];n.src=e,t&&n.addEventListener("load",function(e){t(e)}),i.parentNode.insertBefore(n,i)})("/js/pangu.min.js",function(){pangu.spacingPage()})</script><script>(function(){var e,t,n,s=document.getElementsByTagName("code");for(n=0;n<s.length;){if(t=s[n],t.parentNode.tagName!=="PRE"&&t.childElementCount===0&&(e=t.textContent,/^\$[^$]/.test(e)&&/[^$]\$$/.test(e)&&(e=e.replace(/^\$/,"\\(").replace(/\$$/,"\\)"),t.textContent=e),/^\\\((.|\s)+\\\)$/.test(e)||/^\\\[(.|\s)+\\\]$/.test(e)||/^\$(.|\s)+\$$/.test(e)||/^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(e))){t.outerHTML=t.innerHTML;continue}n++}})()</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>